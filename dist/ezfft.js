var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{fft:()=>i,fftData:()=>a,fftDataFrequency:()=>n,fftDataTime:()=>r,ifft:()=>f});class r{constructor(e,t){this.real=e,this.realPart=e,this.imag=t,this.imagPart=t,this.time=[]}}class n{constructor(e,t){this.real=e,this.realPart=e,this.imag=t,this.imagPart=t,this.amplitude=[],this.phase=[],this.frequency=[]}}class a{constructor(e,t,a){this.time=new r(e,t),this.frequency=new n([],[]),this.fs=a,this.samplingTime=0}}function i(e,t,r=[],n=.001){const i=new a(e,r,t);if(0==i.fs)throw"Sample frequency cannot be zero.";i.samplingTime=i.time.realPart.length/t;for(let e=0;e<i.time.realPart.length;e++)i.time.time[e]=e/t;i.time.imagPart.length!=i.time.realPart.length&&(i.time.imagPart=o(i.time.realPart.length));const f=i.time.realPart.map((function(e){return e})),c=i.time.imagPart.map((function(e){return e}));[i.frequency.realPart,i.frequency.imagPart]=l(f,c);for(let e=0;e<i.frequency.realPart.length;e++)i.frequency.amplitude[e]=Math.sqrt(Math.pow(i.frequency.realPart[e],2)+Math.pow(i.frequency.imagPart[e],2))/(i.frequency.realPart.length/2),i.frequency.phase[e]=Math.atan2(i.frequency.imagPart[e],i.frequency.realPart[e]),i.frequency.frequency[e]=e/i.samplingTime,i.frequency.amplitude[e]<n&&(i.frequency.amplitude[e]=0,i.frequency.phase[e]=0);let u=i.frequency.amplitude.slice(i.frequency.amplitude.length/2,i.frequency.amplitude.length);return u.reverse().forEach((function(e){i.frequency.amplitude.unshift(e),i.frequency.amplitude.pop()})),u=i.frequency.phase.slice(i.frequency.phase.length/2,i.frequency.phase.length),u.reverse().forEach((function(e){i.frequency.phase.unshift(e),i.frequency.phase.pop()})),u=i.frequency.frequency.slice(i.frequency.frequency.length/2,i.frequency.frequency.length),u.forEach((function(e){i.frequency.frequency.unshift(-(e-(t-1)/2)),i.frequency.frequency.pop()})),i.samplingTime-=1/t,i.time.real=i.time.realPart,i.time.imag=i.time.imagPart,i.frequency.real=i.frequency.realPart,i.frequency.imag=i.frequency.imagPart,i}function f(e,t,r=[],n=[],a=[],i=.001){const f={time:{real:[],realPart:[],imag:[],imagPart:[],time:[]},frequency:{real:[],realPart:[],imag:[],imagPart:[],amplitude:e,phase:[],frequency:t},fs:0,samplingTime:0};f.samplingTime=1/Math.abs(t[1]-t[0]),f.fs=2*t.map(Math.abs).reduce((function(e,t){return Math.max(e,t)}));for(let e=0;e<f.samplingTime*f.fs;e++)f.time.time[e]=e/f.fs;if(0==r.length?f.frequency.phase=o(e.length):f.frequency.phase=r,0==n.length&&0==a.length)for(let e=0;e<f.frequency.amplitude.length;e++)f.frequency.realPart[e]=f.frequency.amplitude[e]*f.frequency.amplitude.length/(2*Math.sqrt(1+Math.pow(Math.tan(f.frequency.phase[e]),2))),f.frequency.imagPart[e]=f.frequency.realPart[e]*Math.tan(f.frequency.phase[e]);else f.frequency.realPart=n.map((function(e){return e})),f.frequency.imagPart=a.map((function(e){return e}));const l=f.frequency.realPart.map((function(e){return e})),u=f.frequency.imagPart.map((function(e){return e}));[f.time.imagPart,f.time.realPart]=c(l,u);for(let e=0;e<f.time.imagPart.length;e++)f.time.imagPart[e]<i&&(f.time.imagPart[e]=0);return f.time.real=f.time.realPart,f.time.imag=f.time.imagPart,f.frequency.real=f.frequency.realPart,f.frequency.imag=f.frequency.imagPart,f}function l(e,t){const r=e.length;if(r!=t.length)throw"Mismatched lengths";return 0==r?[]:0==(r&r-1)?function(e,t){const r=e.length;if(r!=t.length)throw"Mismatched lengths";if(1==r)return[];let n=-1;for(let e=0;e<32;e++)1<<e==r&&(n=e);if(-1==n)throw"Length is not a power of 2";const a=new Array(r/2),i=new Array(r/2);for(let e=0;e<r/2;e++)a[e]=Math.cos(2*Math.PI*e/r),i[e]=Math.sin(2*Math.PI*e/r);for(let a=0;a<r;a++){const r=u(a,n);if(r>a){let n=e[a];e[a]=e[r],e[r]=n,n=t[a],t[a]=t[r],t[r]=n}}for(let n=2;n<=r;n*=2){const f=n/2,l=r/n;for(let c=0;c<r;c+=n)for(let r=c,n=0;r<c+f;r++,n+=l){const l=r+f,c=e[l]*a[n]+t[l]*i[n],u=-e[l]*i[n]+t[l]*a[n];e[l]=e[r]-c,t[l]=t[r]-u,e[r]+=c,t[r]+=u}}return[e,t]}(e,t):function(e,t){const r=e.length;if(r!=t.length)throw"Mismatched lengths";let n=1;for(;n<2*r+1;)n*=2;const a=new Array(r),i=new Array(r);for(let e=0;e<r;e++){const t=e*e%(2*r);a[e]=Math.cos(Math.PI*t/r),i[e]=Math.sin(Math.PI*t/r)}const f=o(n),u=o(n);for(let n=0;n<r;n++)f[n]=e[n]*a[n]+t[n]*i[n],u[n]=-e[n]*i[n]+t[n]*a[n];const m=o(n),s=o(n);m[0]=a[0],s[0]=i[0];for(let e=1;e<r;e++)m[e]=m[n-e]=a[e],s[e]=s[n-e]=i[e];const h=new Array(n),g=new Array(n);!function(e,t,r,n,a,i){const f=e.length;if(f!=t.length||f!=r.length||f!=n.length||f!=a.length||f!=i.length)throw"Mismatched lengths";e=e.slice(),t=t.slice(),r=r.slice(),n=n.slice(),l(e,t),l(r,n);for(let a=0;a<f;a++){const i=e[a]*r[a]-t[a]*n[a];t[a]=t[a]*r[a]+e[a]*n[a],e[a]=i}c(e,t);for(let r=0;r<f;r++)a[r]=e[r]/f,i[r]=t[r]/f}(f,u,m,s,h,g);for(let n=0;n<r;n++)e[n]=h[n]*a[n]+g[n]*i[n],t[n]=-h[n]*i[n]+g[n]*a[n];return[e,t]}(e,t)}function c(e,t){return l(t,e)}function u(e,t){let r=0;for(let n=0;n<t;n++)r=r<<1|1&e,e>>>=1;return r}function o(e){const t=[];for(let r=0;r<e;r++)t.push(0);return t}module.exports=t;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQVMvQixHQUFLc0QsRUFBTXRELEdBQUtpQyxFQUFTakMsR0FDdkRmLEVBQUtlLElBQU1xRCxFQUFNckQsR0FBS2lDLEVBQVNqQyxHQUFLc0QsRUFBTXRELEdBQUsrQixFQUFTL0IsR0FHMUQsTUFBTyxDQUFDbkIsRUFBTUksRUFDaEIsQ0FsSlc2RSxDQUFtQmpGLEVBQU1JLEVBQ3BDLENBU0EsU0FBUzJDLEVBQWlCL0MsRUFBZ0JJLEdBQ3hDLE9BQU9xQixFQUFVckIsRUFBTUosRUFDekIsQ0F1RUEsU0FBU3lELEVBQVl5QixFQUFXQyxHQUM5QixJQUFJQyxFQUFJLEVBQ1IsSUFBSyxJQUFJakUsRUFBSSxFQUFHQSxFQUFJZ0UsRUFBTWhFLElBQ3hCaUUsRUFBS0EsR0FBSyxFQUFVLEVBQUpGLEVBQ2hCQSxLQUFPLEVBRVQsT0FBT0UsQ0FDVCxDQWtHQSxTQUFTaEUsRUFBZ0I0QixHQUN2QixNQUFNcUMsRUFBUyxHQUNmLElBQUssSUFBSWxFLEVBQUksRUFBR0EsRUFBSTZCLEVBQUc3QixJQUNyQmtFLEVBQU9DLEtBQUssR0FDZCxPQUFPRCxDQUNULEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9lemZmdC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9lemZmdC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vZXpmZnQvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9lemZmdC93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL2V6ZmZ0Ly4vc3JjL2V6ZmZ0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiLyogXG4gKiBGcmVlIEZGVCBhbmQgY29udm9sdXRpb24gKEphdmFTY3JpcHQpXG4gKiBcbiAqIENvcHlyaWdodCAoYykgMjAxNyBQcm9qZWN0IE5heXVraS4gKE1JVCBMaWNlbnNlKVxuICogaHR0cHM6Ly93d3cubmF5dWtpLmlvL3BhZ2UvZnJlZS1zbWFsbC1mZnQtaW4tbXVsdGlwbGUtbGFuZ3VhZ2VzXG4gKiBcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkgb2ZcbiAqIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW5cbiAqIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG9cbiAqIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mXG4gKiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sXG4gKiBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbiAqIC0gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbiAqICAgYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4gKiAtIFRoZSBTb2Z0d2FyZSBpcyBwcm92aWRlZCBcImFzIGlzXCIsIHdpdGhvdXQgd2FycmFudHkgb2YgYW55IGtpbmQsIGV4cHJlc3Mgb3JcbiAqICAgaW1wbGllZCwgaW5jbHVkaW5nIGJ1dCBub3QgbGltaXRlZCB0byB0aGUgd2FycmFudGllcyBvZiBtZXJjaGFudGFiaWxpdHksXG4gKiAgIGZpdG5lc3MgZm9yIGEgcGFydGljdWxhciBwdXJwb3NlIGFuZCBub25pbmZyaW5nZW1lbnQuIEluIG5vIGV2ZW50IHNoYWxsIHRoZVxuICogICBhdXRob3JzIG9yIGNvcHlyaWdodCBob2xkZXJzIGJlIGxpYWJsZSBmb3IgYW55IGNsYWltLCBkYW1hZ2VzIG9yIG90aGVyXG4gKiAgIGxpYWJpbGl0eSwgd2hldGhlciBpbiBhbiBhY3Rpb24gb2YgY29udHJhY3QsIHRvcnQgb3Igb3RoZXJ3aXNlLCBhcmlzaW5nIGZyb20sXG4gKiAgIG91dCBvZiBvciBpbiBjb25uZWN0aW9uIHdpdGggdGhlIFNvZnR3YXJlIG9yIHRoZSB1c2Ugb3Igb3RoZXIgZGVhbGluZ3MgaW4gdGhlXG4gKiAgIFNvZnR3YXJlLlxuICovXG5cbi8qKiBSZWFsIGFuZCBpbWFnaW5hcnkgcGFydHMgaW4gdGhlIHRpbWUgZG9tYWluICovXG5leHBvcnQgY2xhc3MgZmZ0RGF0YVRpbWUge1xuICAvKiogUmVhbCBwYXJ0ICovXG4gIHJlYWw6IG51bWJlcltdO1xuICAvKipcbiAgICogUmVhbCBwYXJ0XG4gICAqIEBkZXByZWNhdGVkIHVzZSBgcmVhbGAgaW5zdGVhZFxuICAgKi9cbiAgcmVhbFBhcnQ6IG51bWJlcltdO1xuICAvKiogSW1hZ2luYXJ5IHBhcnQgKi9cbiAgaW1hZzogbnVtYmVyW107XG4gIC8qKlxuICAgKiBJbWFnaW5hcnkgcGFydFxuICAgKiBAZGVwcmVjYXRlZCB1c2UgYGltYWdgIGluc3RlYWRcbiAgICovXG4gIGltYWdQYXJ0OiBudW1iZXJbXTtcbiAgLyoqIFRpbWUgYXhpcyAqL1xuICB0aW1lOiBudW1iZXJbXTtcblxuICAvKipcbiAgICogQ3JlYXRlIG5ldyBkYXRhIGluIHRoZSB0aW1lIGRvbWFpblxuICAgKiBAcGFyYW0gcmVhbCB0aGUgcmVhbCBwYXJ0XG4gICAqIEBwYXJhbSBpbWFnaW5hcnkgdGhlIGltYWdpbmFyeSBwYXJ0XG4gICAqL1xuICBjb25zdHJ1Y3RvcihyZWFsOiBudW1iZXJbXSwgaW1hZ2luYXJ5OiBudW1iZXJbXSkge1xuICAgIHRoaXMucmVhbCA9IHJlYWw7XG4gICAgdGhpcy5yZWFsUGFydCA9IHJlYWw7XG4gICAgdGhpcy5pbWFnID0gaW1hZ2luYXJ5O1xuICAgIHRoaXMuaW1hZ1BhcnQgPSBpbWFnaW5hcnk7XG4gICAgdGhpcy50aW1lID0gW107XG4gIH1cblxufVxuXG4vKiogUmVhbCBhbmQgaW1hZ2luYXJ5IHBhcnRzIGluIHRoZSBmcmVxdWVuY3kgZG9tYWluICovXG5leHBvcnQgY2xhc3MgZmZ0RGF0YUZyZXF1ZW5jeSB7XG4gIC8qKiBGRlQgcmVhbCBwYXJ0ICovXG4gIHJlYWw6IG51bWJlcltdO1xuICAvKipcbiAgICogRkZUIHJlYWwgcGFydFxuICAgKiBAZGVwcmVjYXRlZCB1c2UgYHJlYWxgIGluc3RlYWRcbiAgICovXG4gIHJlYWxQYXJ0OiBudW1iZXJbXTtcbiAgLyoqIEZGVCBpbWFnaW5hcnkgcGFydCAqL1xuICBpbWFnOiBudW1iZXJbXTtcbiAgLyoqXG4gICAqIEZGVCBpbWFnaW5hcnkgcGFydFxuICAgKiBAZGVwcmVjYXRlZCB1c2UgYHJlYWxgIGluc3RlYWRcbiAgICovXG4gIGltYWdQYXJ0OiBudW1iZXJbXTtcbiAgLyoqIEFtcGxpdHVkZSBtb2R1bGUgKi9cbiAgYW1wbGl0dWRlOiBudW1iZXJbXTtcbiAgLyoqIFBoYXNlIFtyYWRdICovXG4gIHBoYXNlOiBudW1iZXJbXTtcbiAgLyoqIEZyZXF1ZW5jeSBheGlzICovXG4gIGZyZXF1ZW5jeTogbnVtYmVyW107XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBuZXcgZGF0YSBpbiB0aGUgZnJlcXVlbmN5IGRvbWFpblxuICAgKiBAcGFyYW0gcmVhbCB0aGUgcmVhbCBwYXJ0XG4gICAqIEBwYXJhbSBpbWFnaW5hcnkgdGhlIGltYWdpbmFyeSBwYXJ0XG4gICAqL1xuICBjb25zdHJ1Y3RvcihyZWFsOiBudW1iZXJbXSwgaW1hZ2luYXJ5OiBudW1iZXJbXSkge1xuICAgIHRoaXMucmVhbCA9IHJlYWw7XG4gICAgdGhpcy5yZWFsUGFydCA9IHJlYWw7XG4gICAgdGhpcy5pbWFnID0gaW1hZ2luYXJ5O1xuICAgIHRoaXMuaW1hZ1BhcnQgPSBpbWFnaW5hcnk7XG4gICAgdGhpcy5hbXBsaXR1ZGUgPSBbXTtcbiAgICB0aGlzLnBoYXNlID0gW107XG4gICAgdGhpcy5mcmVxdWVuY3kgPSBbXTtcbiAgfVxuXG59XG5cbi8qKiBGRlQgZGF0YSB0eXBlICovXG5leHBvcnQgY2xhc3MgZmZ0RGF0YSB7XG4gIC8qKiBUaW1lIGRvbWFpbiBkYXRhICovXG4gIHRpbWU6IGZmdERhdGFUaW1lO1xuICAvKiogRnJlcXVlbmN5IGRvbWFpbiBkYXRhICovXG4gIGZyZXF1ZW5jeTogZmZ0RGF0YUZyZXF1ZW5jeTtcbiAgLyoqIFNhbXBsZSBmcmVxdWVuY3kgKi9cbiAgZnM6IG51bWJlcjtcbiAgLyoqIFNhbXBsaW5nIHRpbWUgaW4gc2Vjb25kcyAqL1xuICBzYW1wbGluZ1RpbWU6IG51bWJlcjtcblxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IGBmZnREYXRhYFxuICAgKiBAcGFyYW0gZnMgc2FtcGxlIGZyZXF1ZW5jeVxuICAgKi9cbiAgY29uc3RydWN0b3IocmVhbDogbnVtYmVyW10sIGltYWdpbmFyeTogbnVtYmVyW10sIGZzOiBudW1iZXIpIHtcbiAgICB0aGlzLnRpbWUgPSBuZXcgZmZ0RGF0YVRpbWUocmVhbCwgaW1hZ2luYXJ5KTtcbiAgICB0aGlzLmZyZXF1ZW5jeSA9IG5ldyBmZnREYXRhRnJlcXVlbmN5KFtdLCBbXSk7XG4gICAgdGhpcy5mcyA9IGZzO1xuICAgIHRoaXMuc2FtcGxpbmdUaW1lID0gMDtcbiAgfVxuXG59XG5cbi8qKlxuICogUGVyZm9ybSB0aGUgRkZUIG9mIGEgZ2l2ZW4gc2lnbmFsXG4gKiBAcGFyYW0gc2lnbmFsIGlucHV0IHRpbWUgc2lnbmFsIChyZWFsIHBhcnQpXG4gKiBAcGFyYW0gZnMgdGhlIHNhbXBsZSByYXRlIGluIEh6XG4gKiBAcGFyYW0gaW1hZ1BhcnQgaW5wdXQgdGltZSBzaWduYWwgKGltYWdpbmFyeSBwYXJ0LCBpZiBhbnkpXG4gKiBAcGFyYW0gaWdub3JlRmZ0QW1wbGl0dWRlc0xvd2VyVGhhbiB0aHJlc2hvbGQgdG8gZmlsdGVyIG91dCBzaWduYWxzIGJlbG93IHNvbWUgdmFsdWVcbiAqIEByZXR1cm5zIGEgYGZmdERhdGFgIHdpdGggdGhlIHJlc3VsdHMgb2YgdGhlIEZGVFxuICovXG5leHBvcnQgZnVuY3Rpb24gZmZ0KHNpZ25hbDogbnVtYmVyW10sIGZzOiBudW1iZXIsIGltYWdQYXJ0OiBudW1iZXJbXSA9IFtdLCBpZ25vcmVGZnRBbXBsaXR1ZGVzTG93ZXJUaGFuID0gMWUtMyk6IGZmdERhdGEge1xuXG4gIC8vQ3JlYXRlIGFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIGFsbCBkYXRhIGFib3V0IHRoZSBzaWduYWxcbiAgY29uc3QgZGF0YTogZmZ0RGF0YSA9IG5ldyBmZnREYXRhKHNpZ25hbCwgaW1hZ1BhcnQsIGZzKTtcblxuICAvL0NoZWNrIGlmIFwiZnNcIiBpcyBub3QgemVyb1xuICBpZiAoZGF0YS5mcyA9PSAwKSB7XG4gICAgdGhyb3cgXCJTYW1wbGUgZnJlcXVlbmN5IGNhbm5vdCBiZSB6ZXJvLlwiXG5cbiAgfSBlbHNlIHtcbiAgICAvL0NhbGN1bGF0ZSB0aGUgc2FtcGxpbmcgdGltZSB3aW5kb3dcbiAgICBkYXRhLnNhbXBsaW5nVGltZSA9IGRhdGEudGltZS5yZWFsUGFydC5sZW5ndGggLyBmcztcblxuICAgIC8vQ3JlYXRlIHRpbWUgYXhpc1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS50aW1lLnJlYWxQYXJ0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBkYXRhLnRpbWUudGltZVtpXSA9IGkgLyBmcztcbiAgICB9XG5cbiAgICAvL01ha2UgaW1hZ2luYXJ5IHBhcnQgZXF1YWwgdG8gemVybyBpZiB0aGUgYXJndW1lbnQgaXMgbm90IHBhc3NlZFxuICAgIGlmIChkYXRhLnRpbWUuaW1hZ1BhcnQubGVuZ3RoICE9IGRhdGEudGltZS5yZWFsUGFydC5sZW5ndGgpIHtcbiAgICAgIGRhdGEudGltZS5pbWFnUGFydCA9IG5ld0FycmF5T2ZaZXJvcyhkYXRhLnRpbWUucmVhbFBhcnQubGVuZ3RoKTtcbiAgICB9XG4gIH1cblxuICAvL0F1eGlsaWFyaWVzIHZhcmlhYmxlcyBmb3IgRkZUIHByb2Nlc3Npbmcgd2l0aG91dCBhZGRyZXNzIGFzc29jaWF0aW9uXG4gIGNvbnN0IGF1eFJlYWwgPSBkYXRhLnRpbWUucmVhbFBhcnQubWFwKGZ1bmN0aW9uIChudW0pIHtcbiAgICByZXR1cm4gbnVtO1xuICB9KTtcbiAgY29uc3QgYXV4SW1hZyA9IGRhdGEudGltZS5pbWFnUGFydC5tYXAoZnVuY3Rpb24gKG51bSkge1xuICAgIHJldHVybiBudW07XG4gIH0pO1xuXG4gIC8vQ2FsY3VsYXRlIHRoZSBGb3VyaWVyIFRyYW5zZm9ybSAoY2FsY3VsYXRlZCBmcm9tIDAgdG8gZnMpXG4gIFtkYXRhLmZyZXF1ZW5jeS5yZWFsUGFydCwgZGF0YS5mcmVxdWVuY3kuaW1hZ1BhcnRdID0gdHJhbnNmb3JtKGF1eFJlYWwsIGF1eEltYWcpO1xuXG4gIC8vTm9ybWFsaXplIGRhdGFcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmZyZXF1ZW5jeS5yZWFsUGFydC5sZW5ndGg7IGkrKykge1xuICAgIC8vVGFrZSBGRlQgYW1wbGl0dWRlIG1vZHVsZVxuICAgIGRhdGEuZnJlcXVlbmN5LmFtcGxpdHVkZVtpXSA9IE1hdGguc3FydChNYXRoLnBvdyhkYXRhLmZyZXF1ZW5jeS5yZWFsUGFydFtpXSwgMikgKyBNYXRoLnBvdyhkYXRhLmZyZXF1ZW5jeS5pbWFnUGFydFtpXSwgMikpIC8gKGRhdGEuZnJlcXVlbmN5LnJlYWxQYXJ0Lmxlbmd0aCAvIDIpO1xuXG4gICAgLy9UYWtlIHRoZSBGRlQgcGhhc2VcbiAgICBkYXRhLmZyZXF1ZW5jeS5waGFzZVtpXSA9IE1hdGguYXRhbjIoZGF0YS5mcmVxdWVuY3kuaW1hZ1BhcnRbaV0sIGRhdGEuZnJlcXVlbmN5LnJlYWxQYXJ0W2ldKTsgLy9bcmFkXVxuXG4gICAgLy9DcmVhdGUgZnJlcXVlbmN5IGF4aXNcbiAgICBkYXRhLmZyZXF1ZW5jeS5mcmVxdWVuY3lbaV0gPSBpIC8gZGF0YS5zYW1wbGluZ1RpbWU7XG5cbiAgICAvL1JlbW92ZSBhbXBsaXR1ZGUgdmFsdWVzIHVuZGVyIDEwXi0zIChkZWZhdWx0KSBhbmQsIHRodXMsIGl0J3MgcmVzcGVjdGl2ZSBwaGFzZSB2YWx1ZXNcbiAgICBpZiAoZGF0YS5mcmVxdWVuY3kuYW1wbGl0dWRlW2ldIDwgaWdub3JlRmZ0QW1wbGl0dWRlc0xvd2VyVGhhbikge1xuICAgICAgZGF0YS5mcmVxdWVuY3kuYW1wbGl0dWRlW2ldID0gMDtcbiAgICAgIGRhdGEuZnJlcXVlbmN5LnBoYXNlW2ldID0gMDtcbiAgICB9XG4gIH1cblxuICAvL0FzIEZGVCBpcyBjYWxjdWxhdGVkIGZyb20gMCB0byBmcywgc29tZSBtYW5pcHVsYXRpb24gbXVzdCBiZSBkb25lXG4gIC8vU2VuZCBGRlQgYW1wbGl0dWRlIGZyb20gW2ZzLzIgdG8gZnNdIHRvIFstZnMvcyB0byAwXVxuICBsZXQgc29ydEFycmF5QXV4ID0gZGF0YS5mcmVxdWVuY3kuYW1wbGl0dWRlLnNsaWNlKGRhdGEuZnJlcXVlbmN5LmFtcGxpdHVkZS5sZW5ndGggLyAyLCBkYXRhLmZyZXF1ZW5jeS5hbXBsaXR1ZGUubGVuZ3RoKTtcbiAgc29ydEFycmF5QXV4LnJldmVyc2UoKS5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgIGRhdGEuZnJlcXVlbmN5LmFtcGxpdHVkZS51bnNoaWZ0KGVsKTtcbiAgICBkYXRhLmZyZXF1ZW5jeS5hbXBsaXR1ZGUucG9wKCk7XG4gIH0pO1xuXG4gIC8vU2VuZCBGRlQgcGhhc2UgZnJvbSBbZnMvMiB0byBmc10gdG8gWy1mcy9zIHRvIDBdXG4gIHNvcnRBcnJheUF1eCA9IGRhdGEuZnJlcXVlbmN5LnBoYXNlLnNsaWNlKGRhdGEuZnJlcXVlbmN5LnBoYXNlLmxlbmd0aCAvIDIsIGRhdGEuZnJlcXVlbmN5LnBoYXNlLmxlbmd0aCk7XG4gIHNvcnRBcnJheUF1eC5yZXZlcnNlKCkuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICBkYXRhLmZyZXF1ZW5jeS5waGFzZS51bnNoaWZ0KGVsKTtcbiAgICBkYXRhLmZyZXF1ZW5jeS5waGFzZS5wb3AoKTtcbiAgfSk7XG5cbiAgLy9TZW5kIEZGVCBheGlzIGZyb20gW2ZzLzIgdG8gZnNdIHRvIFstZnMvcyB0byAwXSwgbWlycm9yIGFuZCBzdWJ0cmFjdCAoZnMtMSkvMlxuICBzb3J0QXJyYXlBdXggPSBkYXRhLmZyZXF1ZW5jeS5mcmVxdWVuY3kuc2xpY2UoZGF0YS5mcmVxdWVuY3kuZnJlcXVlbmN5Lmxlbmd0aCAvIDIsIGRhdGEuZnJlcXVlbmN5LmZyZXF1ZW5jeS5sZW5ndGgpO1xuICBzb3J0QXJyYXlBdXguZm9yRWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICBkYXRhLmZyZXF1ZW5jeS5mcmVxdWVuY3kudW5zaGlmdCgtKGVsIC0gKChmcyAtIDEpIC8gMikpKTtcbiAgICBkYXRhLmZyZXF1ZW5jeS5mcmVxdWVuY3kucG9wKCk7XG4gIH0pO1xuXG4gIC8vU2FtcGxpbmcgdGltZSBjb3JyZWN0aW9uXG4gIGRhdGEuc2FtcGxpbmdUaW1lIC09IDEgLyBmcztcblxuICAvL1JldHVybnMgdGhlIHdob2xlIHRoaW5nXG4gIGRhdGEudGltZS5yZWFsID0gZGF0YS50aW1lLnJlYWxQYXJ0O1xuICBkYXRhLnRpbWUuaW1hZyA9IGRhdGEudGltZS5pbWFnUGFydDtcbiAgZGF0YS5mcmVxdWVuY3kucmVhbCA9IGRhdGEuZnJlcXVlbmN5LnJlYWxQYXJ0O1xuICBkYXRhLmZyZXF1ZW5jeS5pbWFnID0gZGF0YS5mcmVxdWVuY3kuaW1hZ1BhcnQ7XG4gIHJldHVybiBkYXRhO1xufVxuXG4vKipcbiAqIFBlcmZvcm0gdGhlIElGRlQgb2YgYSBnaXZlbiBzaWduYWxcbiAqIEBwYXJhbSBhbXBsaXR1ZGUgdGhlIHNpZ25hbCByZWFsIGFtcGxpdHVkZSBheGlzIChvciB1c2UgYGZmdFJlYWxQYXJ0YCBhbmQgYGZmdEltYWdQYXJ0YClcbiAqIEBwYXJhbSBmcmVxdWVuY3kgdGhlIGZyZXF1ZW5jeSBheGlzXG4gKiBAcGFyYW0gcGhhc2UgdGhlIHBoYXNlIGF4aXNcbiAqIEBwYXJhbSBmZnRSZWFsUGFydCByZWFsIHBhcnQgb2YgRkZUIChvdmVycmlkZXMgdGhlIHBhcmFtZXRlcnMgYW1wbGl0dWRlIGFuZCBwaGFzZSlcbiAqIEBwYXJhbSBmZnRJbWFnUGFydCBpbWFnaW5hcnkgcGFydCBvZiBGRlQgKG92ZXJyaWRlcyB0aGUgcGFyYW1ldGVycyBhbXBsaXR1ZGUgYW5kIHBoYXNlKVxuICogQHBhcmFtIGlnbm9yZUltYWdBbXBsaXR1ZGVzTG93ZXJUaGFuIHRocmVzaG9sZCB0byBmaWx0ZXIgb3V0IGltYWcgdmFsdWVzIGJlbG93IHNvbWUgdmFsdWVcbiAqIEByZXR1cm5zIGEgYGZmdERhdGFgIHdpdGggdGhlIHJlc3VsdHMgb2YgdGhlIElGRlRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlmZnQoYW1wbGl0dWRlOiBudW1iZXJbXSwgZnJlcXVlbmN5OiBudW1iZXJbXSwgcGhhc2U6IG51bWJlcltdID0gW10sIGZmdFJlYWxQYXJ0OiBudW1iZXJbXSA9IFtdLCBmZnRJbWFnUGFydDogbnVtYmVyW10gPSBbXSwgaWdub3JlSW1hZ0FtcGxpdHVkZXNMb3dlclRoYW4gPSAxZS0zKTogZmZ0RGF0YSB7XG4gIC8vQ3JlYXRlIGFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIGFsbCBkYXRhIGFib3V0IHRoZSBzaWduYWxcbiAgY29uc3QgZGF0YTogZmZ0RGF0YSA9IHtcbiAgICAvL1RpbWUgZG9tYWluIGRhdGFcbiAgICB0aW1lOiB7XG4gICAgICByZWFsOiBbXSwgLy9SZWFsIHBhcnRcbiAgICAgIHJlYWxQYXJ0OiBbXSwgLy9SZWFsIHBhcnRcbiAgICAgIGltYWc6IFtdLCAvL0ltYWdpbmFyeSBwYXJ0XG4gICAgICBpbWFnUGFydDogW10sIC8vSW1hZ2luYXJ5IHBhcnRcbiAgICAgIHRpbWU6IFtdIC8vVGltZSBheGlzXG4gICAgfSxcbiAgICAvL0ZyZXF1ZW5jeSBkb21haW4gZGF0YVxuICAgIGZyZXF1ZW5jeToge1xuICAgICAgcmVhbDogW10sIC8vRkZUIHJlYWwgcGFydFxuICAgICAgcmVhbFBhcnQ6IFtdLCAvL0ZGVCByZWFsIHBhcnRcbiAgICAgIGltYWc6IFtdLCAvL0ZGVCBpbWFnaW5hcnkgcGFydFxuICAgICAgaW1hZ1BhcnQ6IFtdLCAvL0ZGVCBpbWFnaW5hcnkgcGFydFxuICAgICAgYW1wbGl0dWRlOiBhbXBsaXR1ZGUsIC8vQW1wbGl0dWRlIG1vZHVsZVxuICAgICAgcGhhc2U6IFtdLCAvL1BoYXNlIFtyYWRdXG4gICAgICBmcmVxdWVuY3k6IGZyZXF1ZW5jeSAvL0ZyZXF1ZW5jeSBheGlzXG4gICAgfSxcbiAgICBmczogMCwgLy9TYW1wbGUgcmF0ZVxuICAgIHNhbXBsaW5nVGltZTogMCAvL1NhbXBsaW5nIHRpbWVcbiAgfVxuXG4gIC8vQ2FsY3VsYXRlIHRoZSBzYW1wbGluZyB0aW1lIGFuZCB0aGUgc2FtcGxlIHJhdGVcbiAgZGF0YS5zYW1wbGluZ1RpbWUgPSAxIC8gKE1hdGguYWJzKGZyZXF1ZW5jeVsxXSAtIGZyZXF1ZW5jeVswXSkpO1xuICBkYXRhLmZzID0gMiAqIGZyZXF1ZW5jeS5tYXAoTWF0aC5hYnMpLnJlZHVjZShmdW5jdGlvbiAoYSwgYikge1xuICAgIHJldHVybiBNYXRoLm1heChhLCBiKVxuICB9KTtcblxuICAvL0dlbmVyYXRlIHRoZSB0aW1lIGF4aXNcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLnNhbXBsaW5nVGltZSAqIGRhdGEuZnM7IGkrKykge1xuICAgIGRhdGEudGltZS50aW1lW2ldID0gaSAvIGRhdGEuZnM7XG4gIH1cblxuICAvL0lmIG5vIHBoYXNlIGhhcyBiZWVuIHBhc3NlZFxuICBpZiAocGhhc2UubGVuZ3RoID09IDApIHtcbiAgICAvL0NyZWF0ZSBhbiBlbXB0eSBwaGFzZSBhcnJheVxuICAgIGRhdGEuZnJlcXVlbmN5LnBoYXNlID0gbmV3QXJyYXlPZlplcm9zKGFtcGxpdHVkZS5sZW5ndGgpO1xuICB9IGVsc2Uge1xuICAgIC8vT3RoZXJ3aXNlIHN0b3JlIGl0XG4gICAgZGF0YS5mcmVxdWVuY3kucGhhc2UgPSBwaGFzZTtcbiAgfVxuXG4gIC8vSWYgbm8gcmVhbCBhbmQgaW1hZ2luYXJ5IHBhcnQgaGFzIGJlZW4gcGFzc2VkXG4gIGlmIChmZnRSZWFsUGFydC5sZW5ndGggPT0gMCAmJiBmZnRJbWFnUGFydC5sZW5ndGggPT0gMCkge1xuICAgIC8vQ2FsY3VsYXRlIHRoZW1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEuZnJlcXVlbmN5LmFtcGxpdHVkZS5sZW5ndGg7IGkrKykge1xuICAgICAgZGF0YS5mcmVxdWVuY3kucmVhbFBhcnRbaV0gPSAoZGF0YS5mcmVxdWVuY3kuYW1wbGl0dWRlW2ldICogZGF0YS5mcmVxdWVuY3kuYW1wbGl0dWRlLmxlbmd0aCkgLyAoMiAqIE1hdGguc3FydCgxICsgTWF0aC5wb3coTWF0aC50YW4oZGF0YS5mcmVxdWVuY3kucGhhc2VbaV0pLCAyKSkpO1xuICAgICAgZGF0YS5mcmVxdWVuY3kuaW1hZ1BhcnRbaV0gPSBkYXRhLmZyZXF1ZW5jeS5yZWFsUGFydFtpXSAqIE1hdGgudGFuKGRhdGEuZnJlcXVlbmN5LnBoYXNlW2ldKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy9PdGhlcndpc2Ugc3RvcmUgaXQgd2l0aG91dCBhZGRyZXNzIGFzc29jaWF0aW9uXG4gICAgZGF0YS5mcmVxdWVuY3kucmVhbFBhcnQgPSBmZnRSZWFsUGFydC5tYXAoZnVuY3Rpb24gKG51bSkge1xuICAgICAgcmV0dXJuIG51bTtcbiAgICB9KTtcbiAgICBkYXRhLmZyZXF1ZW5jeS5pbWFnUGFydCA9IGZmdEltYWdQYXJ0Lm1hcChmdW5jdGlvbiAobnVtKSB7XG4gICAgICByZXR1cm4gbnVtO1xuICAgIH0pO1xuICB9XG5cbiAgLy9BdXhpbGlhcmllcyB2YXJpYWJsZXMgZm9yIEZGVCBwcm9jZXNzaW5nIHdpdGhvdXQgYWRkcmVzcyBhc3NvY2lhdGlvblxuICBjb25zdCBhdXhSZWFsID0gZGF0YS5mcmVxdWVuY3kucmVhbFBhcnQubWFwKGZ1bmN0aW9uIChudW0pIHtcbiAgICByZXR1cm4gbnVtO1xuICB9KTtcbiAgY29uc3QgYXV4SW1hZyA9IGRhdGEuZnJlcXVlbmN5LmltYWdQYXJ0Lm1hcChmdW5jdGlvbiAobnVtKSB7XG4gICAgcmV0dXJuIG51bTtcbiAgfSk7XG5cbiAgLy9QZXJmb3JtIHRoZSBpbnZlcnNlIHRyYW5zZm9ybVxuICBbZGF0YS50aW1lLmltYWdQYXJ0LCBkYXRhLnRpbWUucmVhbFBhcnRdID0gaW52ZXJzZVRyYW5zZm9ybShhdXhSZWFsLCBhdXhJbWFnKTtcblxuICAvL1JlbW92ZSBhbXBsaXR1ZGUgdmFsdWVzIHVuZGVyIDEwXi0zIChkZWZhdWx0KSBhbmQsIHRodXMsIGl0J3MgcmVzcGVjdGl2ZSBwaGFzZSB2YWx1ZXNcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLnRpbWUuaW1hZ1BhcnQubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoZGF0YS50aW1lLmltYWdQYXJ0W2ldIDwgaWdub3JlSW1hZ0FtcGxpdHVkZXNMb3dlclRoYW4pIHtcbiAgICAgIGRhdGEudGltZS5pbWFnUGFydFtpXSA9IDA7XG4gICAgfVxuICB9XG5cbiAgLy9SZXR1cm4gdGhlIHdob2xlIHRoaW5nXG4gIGRhdGEudGltZS5yZWFsID0gZGF0YS50aW1lLnJlYWxQYXJ0O1xuICBkYXRhLnRpbWUuaW1hZyA9IGRhdGEudGltZS5pbWFnUGFydDtcbiAgZGF0YS5mcmVxdWVuY3kucmVhbCA9IGRhdGEuZnJlcXVlbmN5LnJlYWxQYXJ0O1xuICBkYXRhLmZyZXF1ZW5jeS5pbWFnID0gZGF0YS5mcmVxdWVuY3kuaW1hZ1BhcnQ7XG4gIHJldHVybiBkYXRhO1xuXG59XG5cbi8qKlxuICogQ29tcHV0ZXMgdGhlIGRpc2NyZXRlIEZvdXJpZXIgdHJhbnNmb3JtIChERlQpIG9mIHRoZSBnaXZlbiBjb21wbGV4IHZlY3Rvciwgc3RvcmluZyB0aGUgcmVzdWx0IGJhY2sgaW50byB0aGUgdmVjdG9yLlxuICogVGhlIHZlY3RvciBjYW4gaGF2ZSBhbnkgbGVuZ3RoLiBUaGlzIGlzIGEgd3JhcHBlciBmdW5jdGlvbi5cbiAqIEBwYXJhbSByZWFsIFxuICogQHBhcmFtIGltYWcgXG4gKiBAcmV0dXJucyBcbiAqL1xuZnVuY3Rpb24gdHJhbnNmb3JtKHJlYWw6IG51bWJlcltdLCBpbWFnOiBudW1iZXJbXSk6IEFycmF5PG51bWJlcltdPiB7XG4gIGNvbnN0IG4gPSByZWFsLmxlbmd0aDtcbiAgaWYgKG4gIT0gaW1hZy5sZW5ndGgpXG4gICAgdGhyb3cgXCJNaXNtYXRjaGVkIGxlbmd0aHNcIjtcbiAgaWYgKG4gPT0gMClcbiAgICByZXR1cm4gW107XG4gIGVsc2UgaWYgKChuICYgKG4gLSAxKSkgPT0gMCkgLy8gSXMgcG93ZXIgb2YgMlxuICAgIHJldHVybiB0cmFuc2Zvcm1SYWRpeDIocmVhbCwgaW1hZyk7XG4gIGVsc2UgLy8gTW9yZSBjb21wbGljYXRlZCBhbGdvcml0aG0gZm9yIGFyYml0cmFyeSBzaXplc1xuICAgIHJldHVybiB0cmFuc2Zvcm1CbHVlc3RlaW4ocmVhbCwgaW1hZyk7XG59XG5cbi8qKlxuICogQ29tcHV0ZXMgdGhlIGludmVyc2UgZGlzY3JldGUgRm91cmllciB0cmFuc2Zvcm0gKElERlQpIG9mIHRoZSBnaXZlbiBjb21wbGV4IHZlY3Rvciwgc3RvcmluZyB0aGUgcmVzdWx0IGJhY2sgaW50byB0aGUgdmVjdG9yLlxuICogVGhlIHZlY3RvciBjYW4gaGF2ZSBhbnkgbGVuZ3RoLiBUaGlzIGlzIGEgd3JhcHBlciBmdW5jdGlvbi4gVGhpcyB0cmFuc2Zvcm0gZG9lcyBub3QgcGVyZm9ybSBzY2FsaW5nLCBzbyB0aGUgaW52ZXJzZSBpcyBub3QgYSB0cnVlIGludmVyc2UuXG4gKiBAcGFyYW0gcmVhbCBcbiAqIEBwYXJhbSBpbWFnIFxuICogQHJldHVybnMgXG4gKi9cbmZ1bmN0aW9uIGludmVyc2VUcmFuc2Zvcm0ocmVhbDogbnVtYmVyW10sIGltYWc6IG51bWJlcltdKTogQXJyYXk8bnVtYmVyW10+IHtcbiAgcmV0dXJuIHRyYW5zZm9ybShpbWFnLCByZWFsKTtcbn1cblxuLyoqXG4gKiBDb21wdXRlcyB0aGUgZGlzY3JldGUgRm91cmllciB0cmFuc2Zvcm0gKERGVCkgb2YgdGhlIGdpdmVuIGNvbXBsZXggdmVjdG9yLCBzdG9yaW5nIHRoZSByZXN1bHQgYmFjayBpbnRvIHRoZSB2ZWN0b3IuXG4gKiBUaGUgdmVjdG9yJ3MgbGVuZ3RoIG11c3QgYmUgYSBwb3dlciBvZiAyLiBVc2VzIHRoZSBDb29sZXktVHVrZXkgZGVjaW1hdGlvbi1pbi10aW1lIHJhZGl4LTIgYWxnb3JpdGhtLlxuICogQHBhcmFtIHJlYWwgXG4gKiBAcGFyYW0gaW1hZyBcbiAqIEByZXR1cm5zIFxuICovXG5mdW5jdGlvbiB0cmFuc2Zvcm1SYWRpeDIocmVhbDogbnVtYmVyW10sIGltYWc6IG51bWJlcltdKTogQXJyYXk8bnVtYmVyW10+IHtcbiAgLy8gTGVuZ3RoIHZhcmlhYmxlc1xuICBjb25zdCBuID0gcmVhbC5sZW5ndGg7XG4gIGlmIChuICE9IGltYWcubGVuZ3RoKVxuICAgIHRocm93IFwiTWlzbWF0Y2hlZCBsZW5ndGhzXCI7XG4gIGlmIChuID09IDEpIC8vIFRyaXZpYWwgdHJhbnNmb3JtXG4gICAgcmV0dXJuIFtdO1xuICBsZXQgbGV2ZWxzID0gLTE7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgMzI7IGkrKykge1xuICAgIGlmICgxIDw8IGkgPT0gbilcbiAgICAgIGxldmVscyA9IGk7IC8vIEVxdWFsIHRvIGxvZzIobilcbiAgfVxuICBpZiAobGV2ZWxzID09IC0xKVxuICAgIHRocm93IFwiTGVuZ3RoIGlzIG5vdCBhIHBvd2VyIG9mIDJcIjtcblxuICAvLyBUcmlnb25vbWV0cmljIHRhYmxlc1xuICBjb25zdCBjb3NUYWJsZSA9IG5ldyBBcnJheShuIC8gMik7XG4gIGNvbnN0IHNpblRhYmxlID0gbmV3IEFycmF5KG4gLyAyKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBuIC8gMjsgaSsrKSB7XG4gICAgY29zVGFibGVbaV0gPSBNYXRoLmNvcygyICogTWF0aC5QSSAqIGkgLyBuKTtcbiAgICBzaW5UYWJsZVtpXSA9IE1hdGguc2luKDIgKiBNYXRoLlBJICogaSAvIG4pO1xuICB9XG5cbiAgLy8gQml0LXJldmVyc2VkIGFkZHJlc3NpbmcgcGVybXV0YXRpb25cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHtcbiAgICBjb25zdCBqID0gcmV2ZXJzZUJpdHMoaSwgbGV2ZWxzKTtcbiAgICBpZiAoaiA+IGkpIHtcbiAgICAgIGxldCB0ZW1wID0gcmVhbFtpXTtcbiAgICAgIHJlYWxbaV0gPSByZWFsW2pdO1xuICAgICAgcmVhbFtqXSA9IHRlbXA7XG4gICAgICB0ZW1wID0gaW1hZ1tpXTtcbiAgICAgIGltYWdbaV0gPSBpbWFnW2pdO1xuICAgICAgaW1hZ1tqXSA9IHRlbXA7XG4gICAgfVxuICB9XG5cbiAgLy8gQ29vbGV5LVR1a2V5IGRlY2ltYXRpb24taW4tdGltZSByYWRpeC0yIEZGVFxuICBmb3IgKGxldCBzaXplID0gMjsgc2l6ZSA8PSBuOyBzaXplICo9IDIpIHtcbiAgICBjb25zdCBoYWxmU2l6ZSA9IHNpemUgLyAyO1xuICAgIGNvbnN0IHRhYmxlU3RlcCA9IG4gLyBzaXplO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSArPSBzaXplKSB7XG4gICAgICBmb3IgKGxldCBqID0gaSwgayA9IDA7IGogPCBpICsgaGFsZlNpemU7IGorKywgayArPSB0YWJsZVN0ZXApIHtcbiAgICAgICAgY29uc3QgbCA9IGogKyBoYWxmU2l6ZTtcbiAgICAgICAgY29uc3QgdFByZSA9IHJlYWxbbF0gKiBjb3NUYWJsZVtrXSArIGltYWdbbF0gKiBzaW5UYWJsZVtrXTtcbiAgICAgICAgY29uc3QgdFBpbSA9IC1yZWFsW2xdICogc2luVGFibGVba10gKyBpbWFnW2xdICogY29zVGFibGVba107XG4gICAgICAgIHJlYWxbbF0gPSByZWFsW2pdIC0gdFByZTtcbiAgICAgICAgaW1hZ1tsXSA9IGltYWdbal0gLSB0UGltO1xuICAgICAgICByZWFsW2pdICs9IHRQcmU7XG4gICAgICAgIGltYWdbal0gKz0gdFBpbTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gW3JlYWwsIGltYWddO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGludGVnZXIgd2hvc2UgdmFsdWUgaXMgdGhlIHJldmVyc2Ugb2YgdGhlIGxvd2VzdCAnYml0cycgYml0cyBvZiB0aGUgaW50ZWdlciAneCcuXG4gKiBAcGFyYW0geCBcbiAqIEBwYXJhbSBiaXRzIFxuICogQHJldHVybnMgXG4gKi9cbmZ1bmN0aW9uIHJldmVyc2VCaXRzKHg6IG51bWJlciwgYml0czogbnVtYmVyKTogbnVtYmVyIHtcbiAgbGV0IHkgPSAwO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGJpdHM7IGkrKykge1xuICAgIHkgPSAoeSA8PCAxKSB8ICh4ICYgMSk7XG4gICAgeCA+Pj49IDE7XG4gIH1cbiAgcmV0dXJuIHk7XG59XG5cbi8qKlxuICogQ29tcHV0ZXMgdGhlIGRpc2NyZXRlIEZvdXJpZXIgdHJhbnNmb3JtIChERlQpIG9mIHRoZSBnaXZlbiBjb21wbGV4IHZlY3Rvciwgc3RvcmluZyB0aGUgcmVzdWx0IGJhY2sgaW50byB0aGUgdmVjdG9yLlxuICogVGhlIHZlY3RvciBjYW4gaGF2ZSBhbnkgbGVuZ3RoLiBUaGlzIHJlcXVpcmVzIHRoZSBjb252b2x1dGlvbiBmdW5jdGlvbiwgd2hpY2ggaW4gdHVybiByZXF1aXJlcyB0aGUgcmFkaXgtMiBGRlQgZnVuY3Rpb24uXG4gKiBVc2VzIEJsdWVzdGVpbidzIGNoaXJwIHotdHJhbnNmb3JtIGFsZ29yaXRobS5cbiAqIEBwYXJhbSByZWFsIFxuICogQHBhcmFtIGltYWcgXG4gKiBAcmV0dXJucyBcbiAqL1xuZnVuY3Rpb24gdHJhbnNmb3JtQmx1ZXN0ZWluKHJlYWw6IG51bWJlcltdLCBpbWFnOiBudW1iZXJbXSk6IEFycmF5PG51bWJlcltdPiB7XG4gIC8vIEZpbmQgYSBwb3dlci1vZi0yIGNvbnZvbHV0aW9uIGxlbmd0aCBtIHN1Y2ggdGhhdCBtID49IG4gKiAyICsgMVxuICBjb25zdCBuID0gcmVhbC5sZW5ndGg7XG4gIGlmIChuICE9IGltYWcubGVuZ3RoKVxuICAgIHRocm93IFwiTWlzbWF0Y2hlZCBsZW5ndGhzXCI7XG4gIGxldCBtID0gMTtcbiAgd2hpbGUgKG0gPCBuICogMiArIDEpXG4gICAgbSAqPSAyO1xuXG4gIC8vIFRyaWdvbm9tZXRyaWMgdGFibGVzXG4gIGNvbnN0IGNvc1RhYmxlID0gbmV3IEFycmF5KG4pO1xuICBjb25zdCBzaW5UYWJsZSA9IG5ldyBBcnJheShuKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHtcbiAgICBjb25zdCBqID0gaSAqIGkgJSAobiAqIDIpOyAvLyBUaGlzIGlzIG1vcmUgYWNjdXJhdGUgdGhhbiBqID0gaSAqIGlcbiAgICBjb3NUYWJsZVtpXSA9IE1hdGguY29zKE1hdGguUEkgKiBqIC8gbik7XG4gICAgc2luVGFibGVbaV0gPSBNYXRoLnNpbihNYXRoLlBJICogaiAvIG4pO1xuICB9XG5cbiAgLy8gVGVtcG9yYXJ5IHZlY3RvcnMgYW5kIHByZXByb2Nlc3NpbmdcbiAgY29uc3QgYVJlYWwgPSBuZXdBcnJheU9mWmVyb3MobSk7XG4gIGNvbnN0IGFJbWFnID0gbmV3QXJyYXlPZlplcm9zKG0pO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IG47IGkrKykge1xuICAgIGFSZWFsW2ldID0gcmVhbFtpXSAqIGNvc1RhYmxlW2ldICsgaW1hZ1tpXSAqIHNpblRhYmxlW2ldO1xuICAgIGFJbWFnW2ldID0gLXJlYWxbaV0gKiBzaW5UYWJsZVtpXSArIGltYWdbaV0gKiBjb3NUYWJsZVtpXTtcbiAgfVxuICBjb25zdCBiUmVhbCA9IG5ld0FycmF5T2ZaZXJvcyhtKTtcbiAgY29uc3QgYkltYWcgPSBuZXdBcnJheU9mWmVyb3MobSk7XG4gIGJSZWFsWzBdID0gY29zVGFibGVbMF07XG4gIGJJbWFnWzBdID0gc2luVGFibGVbMF07XG4gIGZvciAobGV0IGkgPSAxOyBpIDwgbjsgaSsrKSB7XG4gICAgYlJlYWxbaV0gPSBiUmVhbFttIC0gaV0gPSBjb3NUYWJsZVtpXTtcbiAgICBiSW1hZ1tpXSA9IGJJbWFnW20gLSBpXSA9IHNpblRhYmxlW2ldO1xuICB9XG5cbiAgLy8gQ29udm9sdXRpb25cbiAgY29uc3QgY1JlYWwgPSBuZXcgQXJyYXkobSk7XG4gIGNvbnN0IGNJbWFnID0gbmV3IEFycmF5KG0pO1xuICBjb252b2x2ZUNvbXBsZXgoYVJlYWwsIGFJbWFnLCBiUmVhbCwgYkltYWcsIGNSZWFsLCBjSW1hZyk7XG5cbiAgLy8gUG9zdHByb2Nlc3NpbmdcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHtcbiAgICByZWFsW2ldID0gY1JlYWxbaV0gKiBjb3NUYWJsZVtpXSArIGNJbWFnW2ldICogc2luVGFibGVbaV07XG4gICAgaW1hZ1tpXSA9IC1jUmVhbFtpXSAqIHNpblRhYmxlW2ldICsgY0ltYWdbaV0gKiBjb3NUYWJsZVtpXTtcbiAgfVxuXG4gIHJldHVybiBbcmVhbCwgaW1hZ107XG59XG5cbi8qKlxuICogQ29tcHV0ZXMgdGhlIGNpcmN1bGFyIGNvbnZvbHV0aW9uIG9mIHRoZSBnaXZlbiBjb21wbGV4IHZlY3RvcnMuIEVhY2ggdmVjdG9yJ3MgbGVuZ3RoIG11c3QgYmUgdGhlIHNhbWUuXG4gKiBAcGFyYW0geFJlYWwgXG4gKiBAcGFyYW0geEltYWcgXG4gKiBAcGFyYW0geVJlYWwgXG4gKiBAcGFyYW0geUltYWcgXG4gKiBAcGFyYW0gb3V0UmVhbCBcbiAqIEBwYXJhbSBvdXRJbWFnIFxuICovXG5mdW5jdGlvbiBjb252b2x2ZUNvbXBsZXgoeFJlYWw6IG51bWJlcltdLCB4SW1hZzogbnVtYmVyW10sIHlSZWFsOiBudW1iZXJbXSwgeUltYWc6IG51bWJlcltdLCBvdXRSZWFsOiBudW1iZXJbXSwgb3V0SW1hZzogbnVtYmVyW10pOiB2b2lkIHtcbiAgY29uc3QgbiA9IHhSZWFsLmxlbmd0aDtcbiAgaWYgKG4gIT0geEltYWcubGVuZ3RoIHx8IG4gIT0geVJlYWwubGVuZ3RoIHx8IG4gIT0geUltYWcubGVuZ3RoIHx8XG4gICAgbiAhPSBvdXRSZWFsLmxlbmd0aCB8fCBuICE9IG91dEltYWcubGVuZ3RoKVxuICAgIHRocm93IFwiTWlzbWF0Y2hlZCBsZW5ndGhzXCI7XG5cbiAgeFJlYWwgPSB4UmVhbC5zbGljZSgpO1xuICB4SW1hZyA9IHhJbWFnLnNsaWNlKCk7XG4gIHlSZWFsID0geVJlYWwuc2xpY2UoKTtcbiAgeUltYWcgPSB5SW1hZy5zbGljZSgpO1xuICB0cmFuc2Zvcm0oeFJlYWwsIHhJbWFnKTtcbiAgdHJhbnNmb3JtKHlSZWFsLCB5SW1hZyk7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHtcbiAgICBjb25zdCB0ZW1wID0geFJlYWxbaV0gKiB5UmVhbFtpXSAtIHhJbWFnW2ldICogeUltYWdbaV07XG4gICAgeEltYWdbaV0gPSB4SW1hZ1tpXSAqIHlSZWFsW2ldICsgeFJlYWxbaV0gKiB5SW1hZ1tpXTtcbiAgICB4UmVhbFtpXSA9IHRlbXA7XG4gIH1cbiAgaW52ZXJzZVRyYW5zZm9ybSh4UmVhbCwgeEltYWcpO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7IC8vIFNjYWxpbmcgKGJlY2F1c2UgdGhpcyBGRlQgaW1wbGVtZW50YXRpb24gb21pdHMgaXQpXG4gICAgb3V0UmVhbFtpXSA9IHhSZWFsW2ldIC8gbjtcbiAgICBvdXRJbWFnW2ldID0geEltYWdbaV0gLyBuO1xuICB9XG59XG5cbi8qKlxuICogQ3JlYXRlIGFuIGFycmF5IG9mIHNpemUgYG5gIHdpdGggemVyb3NcbiAqIEBwYXJhbSBuIGFycmF5IHNpemVcbiAqIEByZXR1cm5zIHRoZSByZXN1bHRpbmcgYXJyYXlcbiAqL1xuZnVuY3Rpb24gbmV3QXJyYXlPZlplcm9zKG46IG51bWJlcik6IG51bWJlcltdIHtcbiAgY29uc3QgcmVzdWx0ID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKVxuICAgIHJlc3VsdC5wdXNoKDApO1xuICByZXR1cm4gcmVzdWx0O1xufSJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZXhwb3J0cyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJmZnREYXRhVGltZSIsImNvbnN0cnVjdG9yIiwicmVhbCIsImltYWdpbmFyeSIsInRoaXMiLCJyZWFsUGFydCIsImltYWciLCJpbWFnUGFydCIsInRpbWUiLCJmZnREYXRhRnJlcXVlbmN5IiwiYW1wbGl0dWRlIiwicGhhc2UiLCJmcmVxdWVuY3kiLCJmZnREYXRhIiwiZnMiLCJzYW1wbGluZ1RpbWUiLCJmZnQiLCJzaWduYWwiLCJpZ25vcmVGZnRBbXBsaXR1ZGVzTG93ZXJUaGFuIiwiZGF0YSIsImxlbmd0aCIsImkiLCJuZXdBcnJheU9mWmVyb3MiLCJhdXhSZWFsIiwibWFwIiwibnVtIiwiYXV4SW1hZyIsInRyYW5zZm9ybSIsIk1hdGgiLCJzcXJ0IiwicG93IiwiYXRhbjIiLCJzb3J0QXJyYXlBdXgiLCJzbGljZSIsInJldmVyc2UiLCJmb3JFYWNoIiwiZWwiLCJ1bnNoaWZ0IiwicG9wIiwiaWZmdCIsImZmdFJlYWxQYXJ0IiwiZmZ0SW1hZ1BhcnQiLCJpZ25vcmVJbWFnQW1wbGl0dWRlc0xvd2VyVGhhbiIsImFicyIsInJlZHVjZSIsImEiLCJiIiwibWF4IiwidGFuIiwiaW52ZXJzZVRyYW5zZm9ybSIsIm4iLCJsZXZlbHMiLCJjb3NUYWJsZSIsIkFycmF5Iiwic2luVGFibGUiLCJjb3MiLCJQSSIsInNpbiIsImoiLCJyZXZlcnNlQml0cyIsInRlbXAiLCJzaXplIiwiaGFsZlNpemUiLCJ0YWJsZVN0ZXAiLCJrIiwibCIsInRQcmUiLCJ0UGltIiwidHJhbnNmb3JtUmFkaXgyIiwibSIsImFSZWFsIiwiYUltYWciLCJiUmVhbCIsImJJbWFnIiwiY1JlYWwiLCJjSW1hZyIsInhSZWFsIiwieEltYWciLCJ5UmVhbCIsInlJbWFnIiwib3V0UmVhbCIsIm91dEltYWciLCJjb252b2x2ZUNvbXBsZXgiLCJ0cmFuc2Zvcm1CbHVlc3RlaW4iLCJ4IiwiYml0cyIsInkiLCJyZXN1bHQiLCJwdXNoIl0sInNvdXJjZVJvb3QiOiIifQ==