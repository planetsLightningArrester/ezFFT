var e={d:(r,t)=>{for(var a in t)e.o(t,a)&&!e.o(r,a)&&Object.defineProperty(r,a,{enumerable:!0,get:t[a]})},o:(e,r)=>Object.prototype.hasOwnProperty.call(e,r),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},r={};function t(e,r,t=[],a=.001){let f={time:{realPart:e,imagPart:t,time:[]},frequency:{realPart:[],imagPart:[],amplitude:[],phase:[],frequency:[]},fs:r,samplingTime:0};if(0==f.fs)throw"Sample frequency cannot be zero.";f.samplingTime=f.time.realPart.length/r;for(let e=0;e<f.time.realPart.length;e++)f.time.time[e]=e/r;f.time.imagPart.length!=f.time.realPart.length&&(f.time.imagPart=u(f.time.realPart.length));let i=f.time.realPart.map((function(e){return e})),l=f.time.imagPart.map((function(e){return e}));[f.frequency.realPart,f.frequency.imagPart]=n(i,l);for(let e=0;e<f.frequency.realPart.length;e++)f.frequency.amplitude[e]=Math.sqrt(Math.pow(f.frequency.realPart[e],2)+Math.pow(f.frequency.imagPart[e],2))/(f.frequency.realPart.length/2),f.frequency.phase[e]=Math.atan2(f.frequency.imagPart[e],f.frequency.realPart[e]),f.frequency.frequency[e]=e/f.samplingTime,f.frequency.amplitude[e]<a&&(f.frequency.amplitude[e]=0,f.frequency.phase[e]=0);let c=f.frequency.amplitude.slice(f.frequency.amplitude.length/2,f.frequency.amplitude.length);return c.reverse().forEach((function(e){f.frequency.amplitude.unshift(e),f.frequency.amplitude.pop()})),c=f.frequency.phase.slice(f.frequency.phase.length/2,f.frequency.phase.length),c.reverse().forEach((function(e){f.frequency.phase.unshift(e),f.frequency.phase.pop()})),c=f.frequency.frequency.slice(f.frequency.frequency.length/2,f.frequency.frequency.length),c.forEach((function(e){f.frequency.frequency.unshift(-(e-(r-1)/2)),f.frequency.frequency.pop()})),f.samplingTime-=1/r,f}function a(e,r,t=[],a=[],n=[],i=.001){let l={time:{realPart:[],imagPart:[],time:[]},frequency:{realPart:[],imagPart:[],amplitude:e,phase:[],frequency:r},fs:0,samplingTime:0};l.samplingTime=1/Math.abs(r[1]-r[0]),l.fs=2*r.map(Math.abs).reduce((function(e,r){return Math.max(e,r)}));for(let e=0;e<l.samplingTime*l.fs;e++)l.time.time[e]=e/l.fs;if(0==t.length?l.frequency.phase=u(e.length):l.frequency.phase=t,0==a.length&&0==n.length)for(let e=0;e<l.frequency.amplitude.length;e++)l.frequency.realPart[e]=l.frequency.amplitude[e]*l.frequency.amplitude.length/(2*Math.sqrt(1+Math.pow(Math.tan(l.frequency.phase[e]),2))),l.frequency.imagPart[e]=l.frequency.realPart[e]*Math.tan(l.frequency.phase[e]);else l.frequency.realPart=a.map((function(e){return e})),l.frequency.imagPart=n.map((function(e){return e}));let c=l.frequency.realPart.map((function(e){return e})),h=l.frequency.imagPart.map((function(e){return e}));[l.time.imagPart,l.time.realPart]=f(c,h);for(let e=0;e<l.time.imagPart.length;e++)l.time.imagPart[e]<i&&(l.time.imagPart[e]=0);return l}function n(e,r){var t=e.length;if(t!=r.length)throw"Mismatched lengths";return 0==t?[]:0==(t&t-1)?function(e,r){var t=e.length;if(t!=r.length)throw"Mismatched lengths";if(1==t)return[];for(var a=-1,n=0;n<32;n++)1<<n==t&&(a=n);if(-1==a)throw"Length is not a power of 2";var f=new Array(t/2),u=new Array(t/2);for(n=0;n<t/2;n++)f[n]=Math.cos(2*Math.PI*n/t),u[n]=Math.sin(2*Math.PI*n/t);for(n=0;n<t;n++)if((o=i(n,a))>n){var l=e[n];e[n]=e[o],e[o]=l,l=r[n],r[n]=r[o],r[o]=l}for(var c=2;c<=t;c*=2){var h=c/2,m=t/c;for(n=0;n<t;n+=c)for(var o=n,y=0;o<n+h;o++,y+=m){var g=o+h,p=e[g]*f[y]+r[g]*u[y],s=-e[g]*u[y]+r[g]*f[y];e[g]=e[o]-p,r[g]=r[o]-s,e[o]+=p,r[o]+=s}}return[e,r]}(e,r):function(e,r){var t=e.length;if(t!=r.length)throw"Mismatched lengths";for(var a=1;a<2*t+1;)a*=2;for(var i=new Array(t),l=new Array(t),c=0;c<t;c++){var h=c*c%(2*t);i[c]=Math.cos(Math.PI*h/t),l[c]=Math.sin(Math.PI*h/t)}var m=u(a),o=u(a);for(c=0;c<t;c++)m[c]=e[c]*i[c]+r[c]*l[c],o[c]=-e[c]*l[c]+r[c]*i[c];var y=u(a),g=u(a);for(y[0]=i[0],g[0]=l[0],c=1;c<t;c++)y[c]=y[a-c]=i[c],g[c]=g[a-c]=l[c];var p=new Array(a),s=new Array(a);for(function(e,r,t,a,i,u){var l=e.length;if(l!=r.length||l!=t.length||l!=a.length||l!=i.length||l!=u.length)throw"Mismatched lengths";e=e.slice(),r=r.slice(),t=t.slice(),a=a.slice(),n(e,r),n(t,a);for(var c=0;c<l;c++){var h=e[c]*t[c]-r[c]*a[c];r[c]=r[c]*t[c]+e[c]*a[c],e[c]=h}for(f(e,r),c=0;c<l;c++)i[c]=e[c]/l,u[c]=r[c]/l}(m,o,y,g,p,s),c=0;c<t;c++)e[c]=p[c]*i[c]+s[c]*l[c],r[c]=-p[c]*l[c]+s[c]*i[c];return[e,r]}(e,r)}function f(e,r){return n(r,e)}function i(e,r){for(var t=0,a=0;a<r;a++)t=t<<1|1&e,e>>>=1;return t}function u(e){for(var r=[],t=0;t<e;t++)r.push(0);return r}e.r(r),e.d(r,{fft:()=>t,ifft:()=>a}),module.exports=r;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXpmZnQuanMiLCJtYXBwaW5ncyI6IkFBQ0EsSUFBSUEsRUFBc0IsQ0NBMUJBLEVBQXdCLENBQUNDLEVBQVNDLEtBQ2pDLElBQUksSUFBSUMsS0FBT0QsRUFDWEYsRUFBb0JJLEVBQUVGLEVBQVlDLEtBQVNILEVBQW9CSSxFQUFFSCxFQUFTRSxJQUM1RUUsT0FBT0MsZUFBZUwsRUFBU0UsRUFBSyxDQUFFSSxZQUFZLEVBQU1DLElBQUtOLEVBQVdDLElBRTFFLEVDTkRILEVBQXdCLENBQUNTLEVBQUtDLElBQVVMLE9BQU9NLFVBQVVDLGVBQWVDLEtBQUtKLEVBQUtDLEdDQ2xGVixFQUF5QkMsSUFDSCxvQkFBWGEsUUFBMEJBLE9BQU9DLGFBQzFDVixPQUFPQyxlQUFlTCxFQUFTYSxPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RYLE9BQU9DLGVBQWVMLEVBQVMsYUFBYyxDQUFFZSxPQUFPLEdBQU8sRyxLQ2tGdkQsU0FBU0MsRUFBSUMsRUFBa0JDLEVBQVlDLEVBQXFCLEdBQUlDLEVBQXVDLE1BR2hILElBQUlDLEVBQWdCLENBRWxCQyxLQUFNLENBQ0pDLFNBQVVOLEVBQ1ZFLFNBQVVBLEVBQ1ZHLEtBQU0sSUFHUkUsVUFBVyxDQUNURCxTQUFVLEdBQ1ZKLFNBQVUsR0FDVk0sVUFBVyxHQUNYQyxNQUFPLEdBQ1BGLFVBQVcsSUFFYk4sR0FBSUEsRUFDSlMsYUFBYyxHQUloQixHQUFlLEdBQVhOLEVBQUtILEdBQ1AsS0FBTSxtQ0FJTkcsRUFBS00sYUFBZU4sRUFBS0MsS0FBS0MsU0FBU0ssT0FBU1YsRUFHaEQsSUFBSyxJQUFJVyxFQUFJLEVBQUdBLEVBQUlSLEVBQUtDLEtBQUtDLFNBQVNLLE9BQVFDLElBQzdDUixFQUFLQyxLQUFLQSxLQUFLTyxHQUFLQSxFQUFJWCxFQUl0QkcsRUFBS0MsS0FBS0gsU0FBU1MsUUFBVVAsRUFBS0MsS0FBS0MsU0FBU0ssU0FDbERQLEVBQUtDLEtBQUtILFNBQVdXLEVBQWdCVCxFQUFLQyxLQUFLQyxTQUFTSyxTQUs1RCxJQUFJRyxFQUFVVixFQUFLQyxLQUFLQyxTQUFTUyxLQUFJLFNBQVVDLEdBQzdDLE9BQU9BLENBQ1QsSUFDSUMsRUFBVWIsRUFBS0MsS0FBS0gsU0FBU2EsS0FBSSxTQUFVQyxHQUM3QyxPQUFPQSxDQUNULEtBR0NaLEVBQUtHLFVBQVVELFNBQVVGLEVBQUtHLFVBQVVMLFVBQVlnQixFQUFVSixFQUFTRyxHQUd4RSxJQUFLLElBQUlMLEVBQUksRUFBR0EsRUFBSVIsRUFBS0csVUFBVUQsU0FBU0ssT0FBUUMsSUFFbERSLEVBQUtHLFVBQVVDLFVBQVVJLEdBQUtPLEtBQUtDLEtBQUtELEtBQUtFLElBQUlqQixFQUFLRyxVQUFVRCxTQUFTTSxHQUFJLEdBQUtPLEtBQUtFLElBQUlqQixFQUFLRyxVQUFVTCxTQUFTVSxHQUFJLEtBQU9SLEVBQUtHLFVBQVVELFNBQVNLLE9BQVMsR0FHL0pQLEVBQUtHLFVBQVVFLE1BQU1HLEdBQUtPLEtBQUtHLE1BQU1sQixFQUFLRyxVQUFVTCxTQUFTVSxHQUFJUixFQUFLRyxVQUFVRCxTQUFTTSxJQUd6RlIsRUFBS0csVUFBVUEsVUFBVUssR0FBS0EsRUFBSVIsRUFBS00sYUFHbkNOLEVBQUtHLFVBQVVDLFVBQVVJLEdBQUtULElBQ2hDQyxFQUFLRyxVQUFVQyxVQUFVSSxHQUFLLEVBQzlCUixFQUFLRyxVQUFVRSxNQUFNRyxHQUFLLEdBTTlCLElBQUlXLEVBQWVuQixFQUFLRyxVQUFVQyxVQUFVZ0IsTUFBTXBCLEVBQUtHLFVBQVVDLFVBQVVHLE9BQVMsRUFBR1AsRUFBS0csVUFBVUMsVUFBVUcsUUF3QmhILE9BdkJBWSxFQUFhRSxVQUFVQyxTQUFRLFNBQVVDLEdBQ3ZDdkIsRUFBS0csVUFBVUMsVUFBVW9CLFFBQVFELEdBQ2pDdkIsRUFBS0csVUFBVUMsVUFBVXFCLEtBQzNCLElBR0FOLEVBQWVuQixFQUFLRyxVQUFVRSxNQUFNZSxNQUFNcEIsRUFBS0csVUFBVUUsTUFBTUUsT0FBUyxFQUFHUCxFQUFLRyxVQUFVRSxNQUFNRSxRQUNoR1ksRUFBYUUsVUFBVUMsU0FBUSxTQUFVQyxHQUN2Q3ZCLEVBQUtHLFVBQVVFLE1BQU1tQixRQUFRRCxHQUM3QnZCLEVBQUtHLFVBQVVFLE1BQU1vQixLQUN2QixJQUdBTixFQUFlbkIsRUFBS0csVUFBVUEsVUFBVWlCLE1BQU1wQixFQUFLRyxVQUFVQSxVQUFVSSxPQUFTLEVBQUdQLEVBQUtHLFVBQVVBLFVBQVVJLFFBQzVHWSxFQUFhRyxTQUFRLFNBQVVDLEdBQzdCdkIsRUFBS0csVUFBVUEsVUFBVXFCLFVBQVVELEdBQU8xQixFQUFLLEdBQUssSUFDcERHLEVBQUtHLFVBQVVBLFVBQVVzQixLQUMzQixJQUdBekIsRUFBS00sY0FBZ0IsRUFBSVQsRUFHbEJHLENBQ1QsQ0FZTyxTQUFTMEIsRUFBS3RCLEVBQXFCRCxFQUFxQkUsRUFBa0IsR0FBSXNCLEVBQXdCLEdBQUlDLEVBQXdCLEdBQUlDLEVBQXdDLE1BRW5MLElBQUk3QixFQUFnQixDQUVsQkMsS0FBTSxDQUNKQyxTQUFVLEdBQ1ZKLFNBQVUsR0FDVkcsS0FBTSxJQUdSRSxVQUFXLENBQ1RELFNBQVUsR0FDVkosU0FBVSxHQUNWTSxVQUFXQSxFQUNYQyxNQUFPLEdBQ1BGLFVBQVdBLEdBRWJOLEdBQUksRUFDSlMsYUFBYyxHQUloQk4sRUFBS00sYUFBZSxFQUFLUyxLQUFLZSxJQUFJM0IsRUFBVSxHQUFLQSxFQUFVLElBQzNESCxFQUFLSCxHQUFLLEVBQUlNLEVBQVVRLElBQUlJLEtBQUtlLEtBQUtDLFFBQU8sU0FBVUMsRUFBR0MsR0FDeEQsT0FBT2xCLEtBQUttQixJQUFJRixFQUFHQyxFQUNyQixJQUdBLElBQUssSUFBSXpCLEVBQUksRUFBR0EsRUFBSVIsRUFBS00sYUFBZU4sRUFBS0gsR0FBSVcsSUFDL0NSLEVBQUtDLEtBQUtBLEtBQUtPLEdBQUtBLEVBQUlSLEVBQUtILEdBYS9CLEdBVG9CLEdBQWhCUSxFQUFNRSxPQUVSUCxFQUFLRyxVQUFVRSxNQUFRSSxFQUFnQkwsRUFBVUcsUUFHakRQLEVBQUtHLFVBQVVFLE1BQVFBLEVBSUMsR0FBdEJzQixFQUFZcEIsUUFBcUMsR0FBdEJxQixFQUFZckIsT0FFekMsSUFBSyxJQUFJQyxFQUFJLEVBQUdBLEVBQUlSLEVBQUtHLFVBQVVDLFVBQVVHLE9BQVFDLElBQ25EUixFQUFLRyxVQUFVRCxTQUFTTSxHQUFNUixFQUFLRyxVQUFVQyxVQUFVSSxHQUFLUixFQUFLRyxVQUFVQyxVQUFVRyxRQUFXLEVBQUlRLEtBQUtDLEtBQUssRUFBSUQsS0FBS0UsSUFBSUYsS0FBS29CLElBQUluQyxFQUFLRyxVQUFVRSxNQUFNRyxJQUFLLEtBQzlKUixFQUFLRyxVQUFVTCxTQUFTVSxHQUFLUixFQUFLRyxVQUFVRCxTQUFTTSxHQUFLTyxLQUFLb0IsSUFBSW5DLEVBQUtHLFVBQVVFLE1BQU1HLFNBSTFGUixFQUFLRyxVQUFVRCxTQUFXeUIsRUFBWWhCLEtBQUksU0FBVUMsR0FDbEQsT0FBT0EsQ0FDVCxJQUNBWixFQUFLRyxVQUFVTCxTQUFXOEIsRUFBWWpCLEtBQUksU0FBVUMsR0FDbEQsT0FBT0EsQ0FDVCxJQUlGLElBQUlGLEVBQVVWLEVBQUtHLFVBQVVELFNBQVNTLEtBQUksU0FBVUMsR0FDbEQsT0FBT0EsQ0FDVCxJQUNJQyxFQUFVYixFQUFLRyxVQUFVTCxTQUFTYSxLQUFJLFNBQVVDLEdBQ2xELE9BQU9BLENBQ1QsS0FHQ1osRUFBS0MsS0FBS0gsU0FBVUUsRUFBS0MsS0FBS0MsVUFBWWtDLEVBQWlCMUIsRUFBU0csR0FHckUsSUFBSyxJQUFJTCxFQUFJLEVBQUdBLEVBQUlSLEVBQUtDLEtBQUtILFNBQVNTLE9BQVFDLElBQ3pDUixFQUFLQyxLQUFLSCxTQUFTVSxHQUFLcUIsSUFDMUI3QixFQUFLQyxLQUFLSCxTQUFTVSxHQUFLLEdBSzVCLE9BQU9SLENBRVQsQ0FTQSxTQUFTYyxFQUFVdUIsRUFBZ0JDLEdBQ2pDLElBQUlDLEVBQUlGLEVBQUs5QixPQUNiLEdBQUlnQyxHQUFLRCxFQUFLL0IsT0FDWixLQUFNLHFCQUNSLE9BQVMsR0FBTGdDLEVBQ0ssR0FDaUIsSUFBaEJBLEVBQUtBLEVBQUksR0F3QnJCLFNBQXlCRixFQUFnQkMsR0FFdkMsSUFBSUMsRUFBSUYsRUFBSzlCLE9BQ2IsR0FBSWdDLEdBQUtELEVBQUsvQixPQUNaLEtBQU0scUJBQ1IsR0FBUyxHQUFMZ0MsRUFDRixNQUFPLEdBRVQsSUFEQSxJQUFJQyxHQUFVLEVBQ0xoQyxFQUFJLEVBQUdBLEVBQUksR0FBSUEsSUFDbEIsR0FBS0EsR0FBSytCLElBQ1pDLEVBQVNoQyxHQUViLElBQWUsR0FBWGdDLEVBQ0YsS0FBTSw2QkFHUixJQUFJQyxFQUFXLElBQUlDLE1BQU1ILEVBQUksR0FDekJJLEVBQVcsSUFBSUQsTUFBTUgsRUFBSSxHQUM3QixJQUFTL0IsRUFBSSxFQUFHQSxFQUFJK0IsRUFBSSxFQUFHL0IsSUFDekJpQyxFQUFTakMsR0FBS08sS0FBSzZCLElBQUksRUFBSTdCLEtBQUs4QixHQUFLckMsRUFBSStCLEdBQ3pDSSxFQUFTbkMsR0FBS08sS0FBSytCLElBQUksRUFBSS9CLEtBQUs4QixHQUFLckMsRUFBSStCLEdBSTNDLElBQVMvQixFQUFJLEVBQUdBLEVBQUkrQixFQUFHL0IsSUFFckIsSUFESXVDLEVBQUlDLEVBQVl4QyxFQUFHZ0MsSUFDZmhDLEVBQUcsQ0FDVCxJQUFJeUMsRUFBT1osRUFBSzdCLEdBQ2hCNkIsRUFBSzdCLEdBQUs2QixFQUFLVSxHQUNmVixFQUFLVSxHQUFLRSxFQUNWQSxFQUFPWCxFQUFLOUIsR0FDWjhCLEVBQUs5QixHQUFLOEIsRUFBS1MsR0FDZlQsRUFBS1MsR0FBS0UsQyxDQUtkLElBQUssSUFBSUMsRUFBTyxFQUFHQSxHQUFRWCxFQUFHVyxHQUFRLEVBQ3BDLEtBQUlDLEVBQVdELEVBQU8sRUFDbEJFLEVBQVliLEVBQUlXLEVBQ3BCLElBQVMxQyxFQUFJLEVBQUdBLEVBQUkrQixFQUFHL0IsR0FBSzBDLEVBQzFCLElBQUssSUFBSUgsRUFBSXZDLEVBQUc2QyxFQUFJLEVBQUdOLEVBQUl2QyxFQUFJMkMsRUFBVUosSUFBS00sR0FBS0QsRUFBVyxDQUM1RCxJQUFJRSxFQUFJUCxFQUFJSSxFQUNSSSxFQUFPbEIsRUFBS2lCLEdBQUtiLEVBQVNZLEdBQUtmLEVBQUtnQixHQUFLWCxFQUFTVSxHQUNsREcsR0FBUW5CLEVBQUtpQixHQUFLWCxFQUFTVSxHQUFLZixFQUFLZ0IsR0FBS2IsRUFBU1ksR0FDdkRoQixFQUFLaUIsR0FBS2pCLEVBQUtVLEdBQUtRLEVBQ3BCakIsRUFBS2dCLEdBQUtoQixFQUFLUyxHQUFLUyxFQUNwQm5CLEVBQUtVLElBQU1RLEVBQ1hqQixFQUFLUyxJQUFNUyxDLENBVlEsQ0FlekIsTUFBTyxDQUFDbkIsRUFBTUMsRUFDaEIsQ0E3RVdtQixDQUFnQnBCLEVBQU1DLEdBc0dqQyxTQUE0QkQsRUFBZ0JDLEdBRTFDLElBQUlDLEVBQUlGLEVBQUs5QixPQUNiLEdBQUlnQyxHQUFLRCxFQUFLL0IsT0FDWixLQUFNLHFCQUVSLElBREEsSUFBSW1ELEVBQUksRUFDREEsRUFBUSxFQUFKbkIsRUFBUSxHQUNqQm1CLEdBQUssRUFLUCxJQUZBLElBQUlqQixFQUFXLElBQUlDLE1BQU1ILEdBQ3JCSSxFQUFXLElBQUlELE1BQU1ILEdBQ2hCL0IsRUFBSSxFQUFHQSxFQUFJK0IsRUFBRy9CLElBQUssQ0FDMUIsSUFBSXVDLEVBQUl2QyxFQUFJQSxHQUFTLEVBQUorQixHQUNqQkUsRUFBU2pDLEdBQUtPLEtBQUs2QixJQUFJN0IsS0FBSzhCLEdBQUtFLEVBQUlSLEdBQ3JDSSxFQUFTbkMsR0FBS08sS0FBSytCLElBQUkvQixLQUFLOEIsR0FBS0UsRUFBSVIsRSxDQUl2QyxJQUFJb0IsRUFBUWxELEVBQWdCaUQsR0FDeEJFLEVBQVFuRCxFQUFnQmlELEdBQzVCLElBQVNsRCxFQUFJLEVBQUdBLEVBQUkrQixFQUFHL0IsSUFDckJtRCxFQUFNbkQsR0FBSzZCLEVBQUs3QixHQUFLaUMsRUFBU2pDLEdBQUs4QixFQUFLOUIsR0FBS21DLEVBQVNuQyxHQUN0RG9ELEVBQU1wRCxJQUFNNkIsRUFBSzdCLEdBQUttQyxFQUFTbkMsR0FBSzhCLEVBQUs5QixHQUFLaUMsRUFBU2pDLEdBRXpELElBQUlxRCxFQUFRcEQsRUFBZ0JpRCxHQUN4QkksRUFBUXJELEVBQWdCaUQsR0FHNUIsSUFGQUcsRUFBTSxHQUFLcEIsRUFBUyxHQUNwQnFCLEVBQU0sR0FBS25CLEVBQVMsR0FDWG5DLEVBQUksRUFBR0EsRUFBSStCLEVBQUcvQixJQUNyQnFELEVBQU1yRCxHQUFLcUQsRUFBTUgsRUFBSWxELEdBQUtpQyxFQUFTakMsR0FDbkNzRCxFQUFNdEQsR0FBS3NELEVBQU1KLEVBQUlsRCxHQUFLbUMsRUFBU25DLEdBSXJDLElBQUl1RCxFQUFRLElBQUlyQixNQUFNZ0IsR0FDbEJNLEVBQVEsSUFBSXRCLE1BQU1nQixHQUl0QixJQThCRixTQUF5Qk8sRUFBaUJDLEVBQWlCQyxFQUFpQkMsRUFBaUJDLEVBQW1CQyxHQUM5RyxJQUFJL0IsRUFBSTBCLEVBQU0xRCxPQUNkLEdBQUlnQyxHQUFLMkIsRUFBTTNELFFBQVVnQyxHQUFLNEIsRUFBTTVELFFBQVVnQyxHQUFLNkIsRUFBTTdELFFBQ3ZEZ0MsR0FBSzhCLEVBQVE5RCxRQUFVZ0MsR0FBSytCLEVBQVEvRCxPQUNwQyxLQUFNLHFCQUVSMEQsRUFBUUEsRUFBTTdDLFFBQ2Q4QyxFQUFRQSxFQUFNOUMsUUFDZCtDLEVBQVFBLEVBQU0vQyxRQUNkZ0QsRUFBUUEsRUFBTWhELFFBQ2ROLEVBQVVtRCxFQUFPQyxHQUNqQnBELEVBQVVxRCxFQUFPQyxHQUVqQixJQUFLLElBQUk1RCxFQUFJLEVBQUdBLEVBQUkrQixFQUFHL0IsSUFBSyxDQUMxQixJQUFJeUMsRUFBT2dCLEVBQU16RCxHQUFLMkQsRUFBTTNELEdBQUswRCxFQUFNMUQsR0FBSzRELEVBQU01RCxHQUNsRDBELEVBQU0xRCxHQUFLMEQsRUFBTTFELEdBQUsyRCxFQUFNM0QsR0FBS3lELEVBQU16RCxHQUFLNEQsRUFBTTVELEdBQ2xEeUQsRUFBTXpELEdBQUt5QyxDLENBSWIsSUFGQWIsRUFBaUI2QixFQUFPQyxHQUVmMUQsRUFBSSxFQUFHQSxFQUFJK0IsRUFBRy9CLElBQ3JCNkQsRUFBUTdELEdBQUt5RCxFQUFNekQsR0FBSytCLEVBQ3hCK0IsRUFBUTlELEdBQUswRCxFQUFNMUQsR0FBSytCLENBRTVCLENBekRFZ0MsQ0FBZ0JaLEVBQU9DLEVBQU9DLEVBQU9DLEVBQU9DLEVBQU9DLEdBRzFDeEQsRUFBSSxFQUFHQSxFQUFJK0IsRUFBRy9CLElBQ3JCNkIsRUFBSzdCLEdBQUt1RCxFQUFNdkQsR0FBS2lDLEVBQVNqQyxHQUFLd0QsRUFBTXhELEdBQUttQyxFQUFTbkMsR0FDdkQ4QixFQUFLOUIsSUFBTXVELEVBQU12RCxHQUFLbUMsRUFBU25DLEdBQUt3RCxFQUFNeEQsR0FBS2lDLEVBQVNqQyxHQUcxRCxNQUFPLENBQUM2QixFQUFNQyxFQUNoQixDQWxKV2tDLENBQW1CbkMsRUFBTUMsRUFDcEMsQ0FTQSxTQUFTRixFQUFpQkMsRUFBZ0JDLEdBQ3hDLE9BQU94QixFQUFVd0IsRUFBTUQsRUFDekIsQ0F1RUEsU0FBU1csRUFBWXlCLEVBQVdDLEdBRTlCLElBREEsSUFBSUMsRUFBSSxFQUNDbkUsRUFBSSxFQUFHQSxFQUFJa0UsRUFBTWxFLElBQ3hCbUUsRUFBS0EsR0FBSyxFQUFVLEVBQUpGLEVBQ2hCQSxLQUFPLEVBRVQsT0FBT0UsQ0FDVCxDQStHQSxTQUFTbEUsRUFBZ0I4QixHQUV2QixJQURBLElBQUlxQyxFQUFTLEdBQ0pwRSxFQUFJLEVBQUdBLEVBQUkrQixFQUFHL0IsSUFDckJvRSxFQUFPQyxLQUFLLEdBQ2QsT0FBT0QsQ0FDVCxDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXpmZnQvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vZXpmZnQvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL2V6ZmZ0L3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vZXpmZnQvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9lemZmdC8uL3NyYy9lemZmdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsIi8qIFxuICogRnJlZSBGRlQgYW5kIGNvbnZvbHV0aW9uIChKYXZhU2NyaXB0KVxuICogXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgUHJvamVjdCBOYXl1a2kuIChNSVQgTGljZW5zZSlcbiAqIGh0dHBzOi8vd3d3Lm5heXVraS5pby9wYWdlL2ZyZWUtc21hbGwtZmZ0LWluLW11bHRpcGxlLWxhbmd1YWdlc1xuICogXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5IG9mXG4gKiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluXG4gKiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvXG4gKiB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZlxuICogdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLFxuICogc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4gKiAtIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG4gKiAgIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICogLSBUaGUgU29mdHdhcmUgaXMgcHJvdmlkZWQgXCJhcyBpc1wiLCB3aXRob3V0IHdhcnJhbnR5IG9mIGFueSBraW5kLCBleHByZXNzIG9yXG4gKiAgIGltcGxpZWQsIGluY2x1ZGluZyBidXQgbm90IGxpbWl0ZWQgdG8gdGhlIHdhcnJhbnRpZXMgb2YgbWVyY2hhbnRhYmlsaXR5LFxuICogICBmaXRuZXNzIGZvciBhIHBhcnRpY3VsYXIgcHVycG9zZSBhbmQgbm9uaW5mcmluZ2VtZW50LiBJbiBubyBldmVudCBzaGFsbCB0aGVcbiAqICAgYXV0aG9ycyBvciBjb3B5cmlnaHQgaG9sZGVycyBiZSBsaWFibGUgZm9yIGFueSBjbGFpbSwgZGFtYWdlcyBvciBvdGhlclxuICogICBsaWFiaWxpdHksIHdoZXRoZXIgaW4gYW4gYWN0aW9uIG9mIGNvbnRyYWN0LCB0b3J0IG9yIG90aGVyd2lzZSwgYXJpc2luZyBmcm9tLFxuICogICBvdXQgb2Ygb3IgaW4gY29ubmVjdGlvbiB3aXRoIHRoZSBTb2Z0d2FyZSBvciB0aGUgdXNlIG9yIG90aGVyIGRlYWxpbmdzIGluIHRoZVxuICogICBTb2Z0d2FyZS5cbiAqL1xuXG4vKipcbiAqIEZGVCBkYXRhIHR5cGVcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBmZnREYXRhIHtcbiAgLyoqXG4gICAqIFRpbWUgZG9tYWluIGRhdGFcbiAgICovXG4gIHRpbWU6IHtcbiAgICAvKipcbiAgICAgKiBSZWFsIHBhcnRcbiAgICAgKi9cbiAgICByZWFsUGFydDogbnVtYmVyW10sXG4gICAgLyoqXG4gICAgICogSW1hZ2luYXJ5IHBhcnRcbiAgICAgKi9cbiAgICBpbWFnUGFydDogbnVtYmVyW10sXG4gICAgLyoqXG4gICAgICogVGltZSBheGlzXG4gICAgICovXG4gICAgdGltZTogbnVtYmVyW11cbiAgfSxcbiAgLyoqXG4gICAqIEZyZXF1ZW5jeSBkb21haW4gZGF0YVxuICAgKi9cbiAgZnJlcXVlbmN5OiB7XG4gICAgLyoqXG4gICAgICogRkZUIHJlYWwgcGFydFxuICAgICAqL1xuICAgIHJlYWxQYXJ0OiBudW1iZXJbXSxcbiAgICAvKipcbiAgICAgKiBGRlQgaW1hZ2luYXJ5IHBhcnRcbiAgICAgKi9cbiAgICBpbWFnUGFydDogbnVtYmVyW10sXG4gICAgLyoqXG4gICAgICogQW1wbGl0dWRlIG1vZHVsZVxuICAgICAqL1xuICAgIGFtcGxpdHVkZTogbnVtYmVyW10sXG4gICAgLyoqXG4gICAgICogUGhhc2UgW3JhZF1cbiAgICAgKi9cbiAgICBwaGFzZTogbnVtYmVyW10sXG4gICAgLyoqXG4gICAgICogRnJlcXVlbmN5IGF4aXNcbiAgICAgKi9cbiAgICBmcmVxdWVuY3k6IG51bWJlcltdXG4gIH0sXG4gIC8qKlxuICAgKiBTYW1wbGUgZnJlcXVlbmN5XG4gICAqL1xuICBmczogbnVtYmVyLFxuICAvKipcbiAgICogU2FtcGxpbmcgdGltZSBpbiBzZWNvbmRzXG4gICAqL1xuICBzYW1wbGluZ1RpbWU6IG51bWJlclxufVxuXG4vKipcbiAqIFBlcmZvcm0gdGhlIEZGVCBvZiBhIGdpdmVuIHNpZ25hbFxuICogQHBhcmFtIHNpZ25hbCBpbnB1dCB0aW1lIHNpZ25hbCAocmVhbCBwYXJ0KVxuICogQHBhcmFtIGZzIHRoZSBzYW1wbGUgcmF0ZSBpbiBIelxuICogQHBhcmFtIGltYWdQYXJ0IGlucHV0IHRpbWUgc2lnbmFsIChpbWFnaW5hcnkgcGFydCwgaWYgYW55KVxuICogQHBhcmFtIGlnbm9yZUZmdEFtcGxpdHVkZXNMb3dlclRoYW4gdGhyZXNob2xkIHRvIGZpbHRlciBvdXQgc2lnbmFscyBiZWxvdyBzb21lIHZhbHVlXG4gKiBAcmV0dXJucyBhIGBmZnREYXRhYCB3aXRoIHRoZSByZXN1bHRzIG9mIHRoZSBGRlRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZmdChzaWduYWw6IG51bWJlcltdLCBmczogbnVtYmVyLCBpbWFnUGFydDogbnVtYmVyW10gPSBbXSwgaWdub3JlRmZ0QW1wbGl0dWRlc0xvd2VyVGhhbjogbnVtYmVyID0gMWUtMyk6IGZmdERhdGEge1xuXG4gIC8vQ3JlYXRlIGFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIGFsbCBkYXRhIGFib3V0IHRoZSBzaWduYWxcbiAgbGV0IGRhdGE6IGZmdERhdGEgPSB7XG4gICAgLy9UaW1lIGRvbWFpbiBkYXRhXG4gICAgdGltZToge1xuICAgICAgcmVhbFBhcnQ6IHNpZ25hbCwgLy9SZWFsIHBhcnRcbiAgICAgIGltYWdQYXJ0OiBpbWFnUGFydCwgLy9JbWFnaW5hcnkgcGFydFxuICAgICAgdGltZTogW10gLy9UaW1lIGF4aXNcbiAgICB9LFxuICAgIC8vRnJlcXVlbmN5IGRvbWFpbiBkYXRhXG4gICAgZnJlcXVlbmN5OiB7XG4gICAgICByZWFsUGFydDogW10sIC8vRkZUIHJlYWwgcGFydFxuICAgICAgaW1hZ1BhcnQ6IFtdLCAvL0ZGVCBpbWFnaW5hcnkgcGFydFxuICAgICAgYW1wbGl0dWRlOiBbXSwgLy9BbXBsaXR1ZGUgbW9kdWxlXG4gICAgICBwaGFzZTogW10sIC8vUGhhc2UgW3JhZF1cbiAgICAgIGZyZXF1ZW5jeTogW10gLy9GcmVxdWVuY3kgYXhpc1xuICAgIH0sXG4gICAgZnM6IGZzLCAvL1NhbXBsZSByYXRlIGluIEh6XG4gICAgc2FtcGxpbmdUaW1lOiAwIC8vU2FtcGxpbmcgdGltZSBpbiBzZWNvbmRzXG4gIH1cblxuICAvL0NoZWNrIGlmIFwiZnNcIiBpcyBub3QgemVyb1xuICBpZiAoZGF0YS5mcyA9PSAwKSB7XG4gICAgdGhyb3cgXCJTYW1wbGUgZnJlcXVlbmN5IGNhbm5vdCBiZSB6ZXJvLlwiXG5cbiAgfSBlbHNlIHtcbiAgICAvL0NhbGN1bGF0ZSB0aGUgc2FtcGxpbmcgdGltZSB3aW5kb3dcbiAgICBkYXRhLnNhbXBsaW5nVGltZSA9IGRhdGEudGltZS5yZWFsUGFydC5sZW5ndGggLyBmcztcblxuICAgIC8vQ3JlYXRlIHRpbWUgYXhpc1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS50aW1lLnJlYWxQYXJ0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBkYXRhLnRpbWUudGltZVtpXSA9IGkgLyBmcztcbiAgICB9XG5cbiAgICAvL01ha2UgaW1hZ2luYXJ5IHBhcnQgZXF1YWwgdG8gemVybyBpZiB0aGUgYXJndW1lbnQgaXMgbm90IHBhc3NlZFxuICAgIGlmIChkYXRhLnRpbWUuaW1hZ1BhcnQubGVuZ3RoICE9IGRhdGEudGltZS5yZWFsUGFydC5sZW5ndGgpIHtcbiAgICAgIGRhdGEudGltZS5pbWFnUGFydCA9IG5ld0FycmF5T2ZaZXJvcyhkYXRhLnRpbWUucmVhbFBhcnQubGVuZ3RoKTtcbiAgICB9XG4gIH1cblxuICAvL0F1eGlsaWFyaWVzIHZhcmlhYmxlcyBmb3IgRkZUIHByb2Nlc3Npbmcgd2l0aG91dCBhZGRyZXNzIGFzc29jaWF0aW9uXG4gIGxldCBhdXhSZWFsID0gZGF0YS50aW1lLnJlYWxQYXJ0Lm1hcChmdW5jdGlvbiAobnVtKSB7XG4gICAgcmV0dXJuIG51bTtcbiAgfSk7XG4gIGxldCBhdXhJbWFnID0gZGF0YS50aW1lLmltYWdQYXJ0Lm1hcChmdW5jdGlvbiAobnVtKSB7XG4gICAgcmV0dXJuIG51bTtcbiAgfSk7XG5cbiAgLy9DYWxjdWxhdGUgdGhlIEZvdXJpZXIgVHJhbnNmb3JtIChjYWxjdWxhdGVkIGZyb20gMCB0byBmcylcbiAgW2RhdGEuZnJlcXVlbmN5LnJlYWxQYXJ0LCBkYXRhLmZyZXF1ZW5jeS5pbWFnUGFydF0gPSB0cmFuc2Zvcm0oYXV4UmVhbCwgYXV4SW1hZyk7XG5cbiAgLy9Ob3JtYWxpemUgZGF0YVxuICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEuZnJlcXVlbmN5LnJlYWxQYXJ0Lmxlbmd0aDsgaSsrKSB7XG4gICAgLy9UYWtlIEZGVCBhbXBsaXR1ZGUgbW9kdWxlXG4gICAgZGF0YS5mcmVxdWVuY3kuYW1wbGl0dWRlW2ldID0gTWF0aC5zcXJ0KE1hdGgucG93KGRhdGEuZnJlcXVlbmN5LnJlYWxQYXJ0W2ldLCAyKSArIE1hdGgucG93KGRhdGEuZnJlcXVlbmN5LmltYWdQYXJ0W2ldLCAyKSkgLyAoZGF0YS5mcmVxdWVuY3kucmVhbFBhcnQubGVuZ3RoIC8gMik7XG5cbiAgICAvL1Rha2UgdGhlIEZGVCBwaGFzZVxuICAgIGRhdGEuZnJlcXVlbmN5LnBoYXNlW2ldID0gTWF0aC5hdGFuMihkYXRhLmZyZXF1ZW5jeS5pbWFnUGFydFtpXSwgZGF0YS5mcmVxdWVuY3kucmVhbFBhcnRbaV0pOyAvL1tyYWRdXG5cbiAgICAvL0NyZWF0ZSBmcmVxdWVuY3kgYXhpc1xuICAgIGRhdGEuZnJlcXVlbmN5LmZyZXF1ZW5jeVtpXSA9IGkgLyBkYXRhLnNhbXBsaW5nVGltZTtcblxuICAgIC8vUmVtb3ZlIGFtcGxpdHVkZSB2YWx1ZXMgdW5kZXIgMTBeLTMgKGRlZmF1bHQpIGFuZCwgdGh1cywgaXQncyByZXNwZWN0aXZlIHBoYXNlIHZhbHVlc1xuICAgIGlmIChkYXRhLmZyZXF1ZW5jeS5hbXBsaXR1ZGVbaV0gPCBpZ25vcmVGZnRBbXBsaXR1ZGVzTG93ZXJUaGFuKSB7XG4gICAgICBkYXRhLmZyZXF1ZW5jeS5hbXBsaXR1ZGVbaV0gPSAwO1xuICAgICAgZGF0YS5mcmVxdWVuY3kucGhhc2VbaV0gPSAwO1xuICAgIH1cbiAgfVxuXG4gIC8vQXMgRkZUIGlzIGNhbGN1bGF0ZWQgZnJvbSAwIHRvIGZzLCBzb21lIG1hbmlwdWxhdGlvbiBtdXN0IGJlIGRvbmVcbiAgLy9TZW5kIEZGVCBhbXBsaXR1ZGUgZnJvbSBbZnMvMiB0byBmc10gdG8gWy1mcy9zIHRvIDBdXG4gIGxldCBzb3J0QXJyYXlBdXggPSBkYXRhLmZyZXF1ZW5jeS5hbXBsaXR1ZGUuc2xpY2UoZGF0YS5mcmVxdWVuY3kuYW1wbGl0dWRlLmxlbmd0aCAvIDIsIGRhdGEuZnJlcXVlbmN5LmFtcGxpdHVkZS5sZW5ndGgpO1xuICBzb3J0QXJyYXlBdXgucmV2ZXJzZSgpLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7XG4gICAgZGF0YS5mcmVxdWVuY3kuYW1wbGl0dWRlLnVuc2hpZnQoZWwpO1xuICAgIGRhdGEuZnJlcXVlbmN5LmFtcGxpdHVkZS5wb3AoKTtcbiAgfSk7XG5cbiAgLy9TZW5kIEZGVCBwaGFzZSBmcm9tIFtmcy8yIHRvIGZzXSB0byBbLWZzL3MgdG8gMF1cbiAgc29ydEFycmF5QXV4ID0gZGF0YS5mcmVxdWVuY3kucGhhc2Uuc2xpY2UoZGF0YS5mcmVxdWVuY3kucGhhc2UubGVuZ3RoIC8gMiwgZGF0YS5mcmVxdWVuY3kucGhhc2UubGVuZ3RoKTtcbiAgc29ydEFycmF5QXV4LnJldmVyc2UoKS5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgIGRhdGEuZnJlcXVlbmN5LnBoYXNlLnVuc2hpZnQoZWwpO1xuICAgIGRhdGEuZnJlcXVlbmN5LnBoYXNlLnBvcCgpO1xuICB9KTtcblxuICAvL1NlbmQgRkZUIGF4aXMgZnJvbSBbZnMvMiB0byBmc10gdG8gWy1mcy9zIHRvIDBdLCBtaXJyb3IgYW5kIHN1YnRyYWN0IChmcy0xKS8yXG4gIHNvcnRBcnJheUF1eCA9IGRhdGEuZnJlcXVlbmN5LmZyZXF1ZW5jeS5zbGljZShkYXRhLmZyZXF1ZW5jeS5mcmVxdWVuY3kubGVuZ3RoIC8gMiwgZGF0YS5mcmVxdWVuY3kuZnJlcXVlbmN5Lmxlbmd0aCk7XG4gIHNvcnRBcnJheUF1eC5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgIGRhdGEuZnJlcXVlbmN5LmZyZXF1ZW5jeS51bnNoaWZ0KC0oZWwgLSAoKGZzIC0gMSkgLyAyKSkpO1xuICAgIGRhdGEuZnJlcXVlbmN5LmZyZXF1ZW5jeS5wb3AoKTtcbiAgfSk7XG5cbiAgLy9TYW1wbGluZyB0aW1lIGNvcnJlY3Rpb25cbiAgZGF0YS5zYW1wbGluZ1RpbWUgLT0gMSAvIGZzO1xuXG4gIC8vUmV0dXJucyB0aGUgd2hvbGUgdGhpbmdcbiAgcmV0dXJuIGRhdGE7XG59XG5cbi8qKlxuICogUGVyZm9ybSB0aGUgSUZGVCBvZiBhIGdpdmVuIHNpZ25hbFxuICogQHBhcmFtIGFtcGxpdHVkZSB0aGUgc2lnbmFsIHJlYWwgYW1wbGl0dWRlIGF4aXMgKG9yIHVzZSBgZmZ0UmVhbFBhcnRgIGFuZCBgZmZ0SW1hZ1BhcnRgKVxuICogQHBhcmFtIGZyZXF1ZW5jeSB0aGUgZnJlcXVlbmN5IGF4aXNcbiAqIEBwYXJhbSBwaGFzZSB0aGUgcGhhc2UgYXhpc1xuICogQHBhcmFtIGZmdFJlYWxQYXJ0IHJlYWwgcGFydCBvZiBGRlQgKG92ZXJyaWRlcyB0aGUgcGFyYW1ldGVycyBhbXBsaXR1ZGUgYW5kIHBoYXNlKVxuICogQHBhcmFtIGZmdEltYWdQYXJ0IGltYWdpbmFyeSBwYXJ0IG9mIEZGVCAob3ZlcnJpZGVzIHRoZSBwYXJhbWV0ZXJzIGFtcGxpdHVkZSBhbmQgcGhhc2UpXG4gKiBAcGFyYW0gaWdub3JlSW1hZ0FtcGxpdHVkZXNMb3dlclRoYW4gdGhyZXNob2xkIHRvIGZpbHRlciBvdXQgaW1hZyB2YWx1ZXMgYmVsb3cgc29tZSB2YWx1ZVxuICogQHJldHVybnMgYSBgZmZ0RGF0YWAgd2l0aCB0aGUgcmVzdWx0cyBvZiB0aGUgSUZGVFxuICovXG5leHBvcnQgZnVuY3Rpb24gaWZmdChhbXBsaXR1ZGU6IG51bWJlcltdLCBmcmVxdWVuY3k6IG51bWJlcltdLCBwaGFzZTogbnVtYmVyW10gPSBbXSwgZmZ0UmVhbFBhcnQ6IG51bWJlcltdID0gW10sIGZmdEltYWdQYXJ0OiBudW1iZXJbXSA9IFtdLCBpZ25vcmVJbWFnQW1wbGl0dWRlc0xvd2VyVGhhbjogbnVtYmVyID0gMWUtMyk6IGZmdERhdGEge1xuICAvL0NyZWF0ZSBhbiBvYmplY3QgdGhhdCBjb250YWlucyBhbGwgZGF0YSBhYm91dCB0aGUgc2lnbmFsXG4gIGxldCBkYXRhOiBmZnREYXRhID0ge1xuICAgIC8vVGltZSBkb21haW4gZGF0YVxuICAgIHRpbWU6IHtcbiAgICAgIHJlYWxQYXJ0OiBbXSwgLy9SZWFsIHBhcnRcbiAgICAgIGltYWdQYXJ0OiBbXSwgLy9JbWFnaW5hcnkgcGFydFxuICAgICAgdGltZTogW10gLy9UaW1lIGF4aXNcbiAgICB9LFxuICAgIC8vRnJlcXVlbmN5IGRvbWFpbiBkYXRhXG4gICAgZnJlcXVlbmN5OiB7XG4gICAgICByZWFsUGFydDogW10sIC8vRkZUIHJlYWwgcGFydFxuICAgICAgaW1hZ1BhcnQ6IFtdLCAvL0ZGVCBpbWFnaW5hcnkgcGFydFxuICAgICAgYW1wbGl0dWRlOiBhbXBsaXR1ZGUsIC8vQW1wbGl0dWRlIG1vZHVsZVxuICAgICAgcGhhc2U6IFtdLCAvL1BoYXNlIFtyYWRdXG4gICAgICBmcmVxdWVuY3k6IGZyZXF1ZW5jeSAvL0ZyZXF1ZW5jeSBheGlzXG4gICAgfSxcbiAgICBmczogMCwgLy9TYW1wbGUgcmF0ZVxuICAgIHNhbXBsaW5nVGltZTogMCAvL1NhbXBsaW5nIHRpbWVcbiAgfVxuXG4gIC8vQ2FsY3VsYXRlIHRoZSBzYW1wbGluZyB0aW1lIGFuZCB0aGUgc2FtcGxlIHJhdGVcbiAgZGF0YS5zYW1wbGluZ1RpbWUgPSAxIC8gKE1hdGguYWJzKGZyZXF1ZW5jeVsxXSAtIGZyZXF1ZW5jeVswXSkpO1xuICBkYXRhLmZzID0gMiAqIGZyZXF1ZW5jeS5tYXAoTWF0aC5hYnMpLnJlZHVjZShmdW5jdGlvbiAoYSwgYikge1xuICAgIHJldHVybiBNYXRoLm1heChhLCBiKVxuICB9KTtcblxuICAvL0dlbmVyYXRlIHRoZSB0aW1lIGF4aXNcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLnNhbXBsaW5nVGltZSAqIGRhdGEuZnM7IGkrKykge1xuICAgIGRhdGEudGltZS50aW1lW2ldID0gaSAvIGRhdGEuZnM7XG4gIH1cblxuICAvL0lmIG5vIHBoYXNlIGhhcyBiZWVuIHBhc3NlZFxuICBpZiAocGhhc2UubGVuZ3RoID09IDApIHtcbiAgICAvL0NyZWF0ZSBhbiBlbXB0eSBwaGFzZSBhcnJheVxuICAgIGRhdGEuZnJlcXVlbmN5LnBoYXNlID0gbmV3QXJyYXlPZlplcm9zKGFtcGxpdHVkZS5sZW5ndGgpO1xuICB9IGVsc2Uge1xuICAgIC8vT3RoZXJ3aXNlIHN0b3JlIGl0XG4gICAgZGF0YS5mcmVxdWVuY3kucGhhc2UgPSBwaGFzZTtcbiAgfVxuXG4gIC8vSWYgbm8gcmVhbCBhbmQgaW1hZ2luYXJ5IHBhcnQgaGFzIGJlZW4gcGFzc2VkXG4gIGlmIChmZnRSZWFsUGFydC5sZW5ndGggPT0gMCAmJiBmZnRJbWFnUGFydC5sZW5ndGggPT0gMCkge1xuICAgIC8vQ2FsY3VsYXRlIHRoZW1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEuZnJlcXVlbmN5LmFtcGxpdHVkZS5sZW5ndGg7IGkrKykge1xuICAgICAgZGF0YS5mcmVxdWVuY3kucmVhbFBhcnRbaV0gPSAoZGF0YS5mcmVxdWVuY3kuYW1wbGl0dWRlW2ldICogZGF0YS5mcmVxdWVuY3kuYW1wbGl0dWRlLmxlbmd0aCkgLyAoMiAqIE1hdGguc3FydCgxICsgTWF0aC5wb3coTWF0aC50YW4oZGF0YS5mcmVxdWVuY3kucGhhc2VbaV0pLCAyKSkpO1xuICAgICAgZGF0YS5mcmVxdWVuY3kuaW1hZ1BhcnRbaV0gPSBkYXRhLmZyZXF1ZW5jeS5yZWFsUGFydFtpXSAqIE1hdGgudGFuKGRhdGEuZnJlcXVlbmN5LnBoYXNlW2ldKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy9PdGhlcndpc2Ugc3RvcmUgaXQgd2l0aG91dCBhZGRyZXNzIGFzc29jaWF0aW9uXG4gICAgZGF0YS5mcmVxdWVuY3kucmVhbFBhcnQgPSBmZnRSZWFsUGFydC5tYXAoZnVuY3Rpb24gKG51bSkge1xuICAgICAgcmV0dXJuIG51bTtcbiAgICB9KTtcbiAgICBkYXRhLmZyZXF1ZW5jeS5pbWFnUGFydCA9IGZmdEltYWdQYXJ0Lm1hcChmdW5jdGlvbiAobnVtKSB7XG4gICAgICByZXR1cm4gbnVtO1xuICAgIH0pO1xuICB9XG5cbiAgLy9BdXhpbGlhcmllcyB2YXJpYWJsZXMgZm9yIEZGVCBwcm9jZXNzaW5nIHdpdGhvdXQgYWRkcmVzcyBhc3NvY2lhdGlvblxuICBsZXQgYXV4UmVhbCA9IGRhdGEuZnJlcXVlbmN5LnJlYWxQYXJ0Lm1hcChmdW5jdGlvbiAobnVtKSB7XG4gICAgcmV0dXJuIG51bTtcbiAgfSk7XG4gIGxldCBhdXhJbWFnID0gZGF0YS5mcmVxdWVuY3kuaW1hZ1BhcnQubWFwKGZ1bmN0aW9uIChudW0pIHtcbiAgICByZXR1cm4gbnVtO1xuICB9KTtcblxuICAvL1BlcmZvcm0gdGhlIGludmVyc2UgdHJhbnNmb3JtXG4gIFtkYXRhLnRpbWUuaW1hZ1BhcnQsIGRhdGEudGltZS5yZWFsUGFydF0gPSBpbnZlcnNlVHJhbnNmb3JtKGF1eFJlYWwsIGF1eEltYWcpO1xuXG4gIC8vUmVtb3ZlIGFtcGxpdHVkZSB2YWx1ZXMgdW5kZXIgMTBeLTMgKGRlZmF1bHQpIGFuZCwgdGh1cywgaXQncyByZXNwZWN0aXZlIHBoYXNlIHZhbHVlc1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEudGltZS5pbWFnUGFydC5sZW5ndGg7IGkrKykge1xuICAgIGlmIChkYXRhLnRpbWUuaW1hZ1BhcnRbaV0gPCBpZ25vcmVJbWFnQW1wbGl0dWRlc0xvd2VyVGhhbikge1xuICAgICAgZGF0YS50aW1lLmltYWdQYXJ0W2ldID0gMDtcbiAgICB9XG4gIH1cblxuICAvL1JldHVybiB0aGUgd2hvbGUgdGhpbmdcbiAgcmV0dXJuIGRhdGE7XG5cbn1cblxuLyoqXG4gKiBDb21wdXRlcyB0aGUgZGlzY3JldGUgRm91cmllciB0cmFuc2Zvcm0gKERGVCkgb2YgdGhlIGdpdmVuIGNvbXBsZXggdmVjdG9yLCBzdG9yaW5nIHRoZSByZXN1bHQgYmFjayBpbnRvIHRoZSB2ZWN0b3IuXG4gKiBUaGUgdmVjdG9yIGNhbiBoYXZlIGFueSBsZW5ndGguIFRoaXMgaXMgYSB3cmFwcGVyIGZ1bmN0aW9uLlxuICogQHBhcmFtIHJlYWwgXG4gKiBAcGFyYW0gaW1hZyBcbiAqIEByZXR1cm5zIFxuICovXG5mdW5jdGlvbiB0cmFuc2Zvcm0ocmVhbDogbnVtYmVyW10sIGltYWc6IG51bWJlcltdKTogQXJyYXk8bnVtYmVyW10+IHtcbiAgdmFyIG4gPSByZWFsLmxlbmd0aDtcbiAgaWYgKG4gIT0gaW1hZy5sZW5ndGgpXG4gICAgdGhyb3cgXCJNaXNtYXRjaGVkIGxlbmd0aHNcIjtcbiAgaWYgKG4gPT0gMClcbiAgICByZXR1cm4gW107XG4gIGVsc2UgaWYgKChuICYgKG4gLSAxKSkgPT0gMCkgLy8gSXMgcG93ZXIgb2YgMlxuICAgIHJldHVybiB0cmFuc2Zvcm1SYWRpeDIocmVhbCwgaW1hZyk7XG4gIGVsc2UgLy8gTW9yZSBjb21wbGljYXRlZCBhbGdvcml0aG0gZm9yIGFyYml0cmFyeSBzaXplc1xuICAgIHJldHVybiB0cmFuc2Zvcm1CbHVlc3RlaW4ocmVhbCwgaW1hZyk7XG59XG5cbi8qKlxuICogQ29tcHV0ZXMgdGhlIGludmVyc2UgZGlzY3JldGUgRm91cmllciB0cmFuc2Zvcm0gKElERlQpIG9mIHRoZSBnaXZlbiBjb21wbGV4IHZlY3Rvciwgc3RvcmluZyB0aGUgcmVzdWx0IGJhY2sgaW50byB0aGUgdmVjdG9yLlxuICogVGhlIHZlY3RvciBjYW4gaGF2ZSBhbnkgbGVuZ3RoLiBUaGlzIGlzIGEgd3JhcHBlciBmdW5jdGlvbi4gVGhpcyB0cmFuc2Zvcm0gZG9lcyBub3QgcGVyZm9ybSBzY2FsaW5nLCBzbyB0aGUgaW52ZXJzZSBpcyBub3QgYSB0cnVlIGludmVyc2UuXG4gKiBAcGFyYW0gcmVhbCBcbiAqIEBwYXJhbSBpbWFnIFxuICogQHJldHVybnMgXG4gKi9cbmZ1bmN0aW9uIGludmVyc2VUcmFuc2Zvcm0ocmVhbDogbnVtYmVyW10sIGltYWc6IG51bWJlcltdKTogQXJyYXk8bnVtYmVyW10+IHtcbiAgcmV0dXJuIHRyYW5zZm9ybShpbWFnLCByZWFsKTtcbn1cblxuLyoqXG4gKiBDb21wdXRlcyB0aGUgZGlzY3JldGUgRm91cmllciB0cmFuc2Zvcm0gKERGVCkgb2YgdGhlIGdpdmVuIGNvbXBsZXggdmVjdG9yLCBzdG9yaW5nIHRoZSByZXN1bHQgYmFjayBpbnRvIHRoZSB2ZWN0b3IuXG4gKiBUaGUgdmVjdG9yJ3MgbGVuZ3RoIG11c3QgYmUgYSBwb3dlciBvZiAyLiBVc2VzIHRoZSBDb29sZXktVHVrZXkgZGVjaW1hdGlvbi1pbi10aW1lIHJhZGl4LTIgYWxnb3JpdGhtLlxuICogQHBhcmFtIHJlYWwgXG4gKiBAcGFyYW0gaW1hZyBcbiAqIEByZXR1cm5zIFxuICovXG5mdW5jdGlvbiB0cmFuc2Zvcm1SYWRpeDIocmVhbDogbnVtYmVyW10sIGltYWc6IG51bWJlcltdKTogQXJyYXk8bnVtYmVyW10+IHtcbiAgLy8gTGVuZ3RoIHZhcmlhYmxlc1xuICB2YXIgbiA9IHJlYWwubGVuZ3RoO1xuICBpZiAobiAhPSBpbWFnLmxlbmd0aClcbiAgICB0aHJvdyBcIk1pc21hdGNoZWQgbGVuZ3Roc1wiO1xuICBpZiAobiA9PSAxKSAvLyBUcml2aWFsIHRyYW5zZm9ybVxuICAgIHJldHVybiBbXTtcbiAgdmFyIGxldmVscyA9IC0xO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IDMyOyBpKyspIHtcbiAgICBpZiAoMSA8PCBpID09IG4pXG4gICAgICBsZXZlbHMgPSBpOyAvLyBFcXVhbCB0byBsb2cyKG4pXG4gIH1cbiAgaWYgKGxldmVscyA9PSAtMSlcbiAgICB0aHJvdyBcIkxlbmd0aCBpcyBub3QgYSBwb3dlciBvZiAyXCI7XG5cbiAgLy8gVHJpZ29ub21ldHJpYyB0YWJsZXNcbiAgdmFyIGNvc1RhYmxlID0gbmV3IEFycmF5KG4gLyAyKTtcbiAgdmFyIHNpblRhYmxlID0gbmV3IEFycmF5KG4gLyAyKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBuIC8gMjsgaSsrKSB7XG4gICAgY29zVGFibGVbaV0gPSBNYXRoLmNvcygyICogTWF0aC5QSSAqIGkgLyBuKTtcbiAgICBzaW5UYWJsZVtpXSA9IE1hdGguc2luKDIgKiBNYXRoLlBJICogaSAvIG4pO1xuICB9XG5cbiAgLy8gQml0LXJldmVyc2VkIGFkZHJlc3NpbmcgcGVybXV0YXRpb25cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHtcbiAgICB2YXIgaiA9IHJldmVyc2VCaXRzKGksIGxldmVscyk7XG4gICAgaWYgKGogPiBpKSB7XG4gICAgICB2YXIgdGVtcCA9IHJlYWxbaV07XG4gICAgICByZWFsW2ldID0gcmVhbFtqXTtcbiAgICAgIHJlYWxbal0gPSB0ZW1wO1xuICAgICAgdGVtcCA9IGltYWdbaV07XG4gICAgICBpbWFnW2ldID0gaW1hZ1tqXTtcbiAgICAgIGltYWdbal0gPSB0ZW1wO1xuICAgIH1cbiAgfVxuXG4gIC8vIENvb2xleS1UdWtleSBkZWNpbWF0aW9uLWluLXRpbWUgcmFkaXgtMiBGRlRcbiAgZm9yICh2YXIgc2l6ZSA9IDI7IHNpemUgPD0gbjsgc2l6ZSAqPSAyKSB7XG4gICAgdmFyIGhhbGZzaXplID0gc2l6ZSAvIDI7XG4gICAgdmFyIHRhYmxlc3RlcCA9IG4gLyBzaXplO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgaSArPSBzaXplKSB7XG4gICAgICBmb3IgKHZhciBqID0gaSwgayA9IDA7IGogPCBpICsgaGFsZnNpemU7IGorKywgayArPSB0YWJsZXN0ZXApIHtcbiAgICAgICAgdmFyIGwgPSBqICsgaGFsZnNpemU7XG4gICAgICAgIHZhciB0cHJlID0gcmVhbFtsXSAqIGNvc1RhYmxlW2tdICsgaW1hZ1tsXSAqIHNpblRhYmxlW2tdO1xuICAgICAgICB2YXIgdHBpbSA9IC1yZWFsW2xdICogc2luVGFibGVba10gKyBpbWFnW2xdICogY29zVGFibGVba107XG4gICAgICAgIHJlYWxbbF0gPSByZWFsW2pdIC0gdHByZTtcbiAgICAgICAgaW1hZ1tsXSA9IGltYWdbal0gLSB0cGltO1xuICAgICAgICByZWFsW2pdICs9IHRwcmU7XG4gICAgICAgIGltYWdbal0gKz0gdHBpbTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gW3JlYWwsIGltYWddO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGludGVnZXIgd2hvc2UgdmFsdWUgaXMgdGhlIHJldmVyc2Ugb2YgdGhlIGxvd2VzdCAnYml0cycgYml0cyBvZiB0aGUgaW50ZWdlciAneCcuXG4gKiBAcGFyYW0geCBcbiAqIEBwYXJhbSBiaXRzIFxuICogQHJldHVybnMgXG4gKi9cbmZ1bmN0aW9uIHJldmVyc2VCaXRzKHg6IG51bWJlciwgYml0czogbnVtYmVyKTogbnVtYmVyIHtcbiAgdmFyIHkgPSAwO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGJpdHM7IGkrKykge1xuICAgIHkgPSAoeSA8PCAxKSB8ICh4ICYgMSk7XG4gICAgeCA+Pj49IDE7XG4gIH1cbiAgcmV0dXJuIHk7XG59XG5cbi8qKlxuICogQ29tcHV0ZXMgdGhlIGRpc2NyZXRlIEZvdXJpZXIgdHJhbnNmb3JtIChERlQpIG9mIHRoZSBnaXZlbiBjb21wbGV4IHZlY3Rvciwgc3RvcmluZyB0aGUgcmVzdWx0IGJhY2sgaW50byB0aGUgdmVjdG9yLlxuICogVGhlIHZlY3RvciBjYW4gaGF2ZSBhbnkgbGVuZ3RoLiBUaGlzIHJlcXVpcmVzIHRoZSBjb252b2x1dGlvbiBmdW5jdGlvbiwgd2hpY2ggaW4gdHVybiByZXF1aXJlcyB0aGUgcmFkaXgtMiBGRlQgZnVuY3Rpb24uXG4gKiBVc2VzIEJsdWVzdGVpbidzIGNoaXJwIHotdHJhbnNmb3JtIGFsZ29yaXRobS5cbiAqIEBwYXJhbSByZWFsIFxuICogQHBhcmFtIGltYWcgXG4gKiBAcmV0dXJucyBcbiAqL1xuZnVuY3Rpb24gdHJhbnNmb3JtQmx1ZXN0ZWluKHJlYWw6IG51bWJlcltdLCBpbWFnOiBudW1iZXJbXSk6IEFycmF5PG51bWJlcltdPiB7XG4gIC8vIEZpbmQgYSBwb3dlci1vZi0yIGNvbnZvbHV0aW9uIGxlbmd0aCBtIHN1Y2ggdGhhdCBtID49IG4gKiAyICsgMVxuICB2YXIgbiA9IHJlYWwubGVuZ3RoO1xuICBpZiAobiAhPSBpbWFnLmxlbmd0aClcbiAgICB0aHJvdyBcIk1pc21hdGNoZWQgbGVuZ3Roc1wiO1xuICB2YXIgbSA9IDE7XG4gIHdoaWxlIChtIDwgbiAqIDIgKyAxKVxuICAgIG0gKj0gMjtcblxuICAvLyBUcmlnb25vbWV0cmljIHRhYmxlc1xuICB2YXIgY29zVGFibGUgPSBuZXcgQXJyYXkobik7XG4gIHZhciBzaW5UYWJsZSA9IG5ldyBBcnJheShuKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHtcbiAgICB2YXIgaiA9IGkgKiBpICUgKG4gKiAyKTsgLy8gVGhpcyBpcyBtb3JlIGFjY3VyYXRlIHRoYW4gaiA9IGkgKiBpXG4gICAgY29zVGFibGVbaV0gPSBNYXRoLmNvcyhNYXRoLlBJICogaiAvIG4pO1xuICAgIHNpblRhYmxlW2ldID0gTWF0aC5zaW4oTWF0aC5QSSAqIGogLyBuKTtcbiAgfVxuXG4gIC8vIFRlbXBvcmFyeSB2ZWN0b3JzIGFuZCBwcmVwcm9jZXNzaW5nXG4gIHZhciBhcmVhbCA9IG5ld0FycmF5T2ZaZXJvcyhtKTtcbiAgdmFyIGFpbWFnID0gbmV3QXJyYXlPZlplcm9zKG0pO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykge1xuICAgIGFyZWFsW2ldID0gcmVhbFtpXSAqIGNvc1RhYmxlW2ldICsgaW1hZ1tpXSAqIHNpblRhYmxlW2ldO1xuICAgIGFpbWFnW2ldID0gLXJlYWxbaV0gKiBzaW5UYWJsZVtpXSArIGltYWdbaV0gKiBjb3NUYWJsZVtpXTtcbiAgfVxuICB2YXIgYnJlYWwgPSBuZXdBcnJheU9mWmVyb3MobSk7XG4gIHZhciBiaW1hZyA9IG5ld0FycmF5T2ZaZXJvcyhtKTtcbiAgYnJlYWxbMF0gPSBjb3NUYWJsZVswXTtcbiAgYmltYWdbMF0gPSBzaW5UYWJsZVswXTtcbiAgZm9yICh2YXIgaSA9IDE7IGkgPCBuOyBpKyspIHtcbiAgICBicmVhbFtpXSA9IGJyZWFsW20gLSBpXSA9IGNvc1RhYmxlW2ldO1xuICAgIGJpbWFnW2ldID0gYmltYWdbbSAtIGldID0gc2luVGFibGVbaV07XG4gIH1cblxuICAvLyBDb252b2x1dGlvblxuICB2YXIgY1JlYWwgPSBuZXcgQXJyYXkobSk7XG4gIHZhciBjSW1hZyA9IG5ldyBBcnJheShtKTtcbiAgY29udm9sdmVDb21wbGV4KGFyZWFsLCBhaW1hZywgYnJlYWwsIGJpbWFnLCBjUmVhbCwgY0ltYWcpO1xuXG4gIC8vIFBvc3Rwcm9jZXNzaW5nXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgaSsrKSB7XG4gICAgcmVhbFtpXSA9IGNSZWFsW2ldICogY29zVGFibGVbaV0gKyBjSW1hZ1tpXSAqIHNpblRhYmxlW2ldO1xuICAgIGltYWdbaV0gPSAtY1JlYWxbaV0gKiBzaW5UYWJsZVtpXSArIGNJbWFnW2ldICogY29zVGFibGVbaV07XG4gIH1cblxuICByZXR1cm4gW3JlYWwsIGltYWddO1xufVxuXG4vKipcbiAqIENvbXB1dGVzIHRoZSBjaXJjdWxhciBjb252b2x1dGlvbiBvZiB0aGUgZ2l2ZW4gcmVhbCB2ZWN0b3JzLiBFYWNoIHZlY3RvcidzIGxlbmd0aCBtdXN0IGJlIHRoZSBzYW1lLlxuICogQHBhcmFtIHggXG4gKiBAcGFyYW0geSBcbiAqIEBwYXJhbSBvdXQgXG4gKi9cbmZ1bmN0aW9uIGNvbnZvbHZlUmVhbCh4OiBudW1iZXJbXSwgeTogbnVtYmVyW10sIG91dDogbnVtYmVyW10pOiB2b2lkIHtcbiAgdmFyIG4gPSB4Lmxlbmd0aDtcbiAgaWYgKG4gIT0geS5sZW5ndGggfHwgbiAhPSBvdXQubGVuZ3RoKVxuICAgIHRocm93IFwiTWlzbWF0Y2hlZCBsZW5ndGhzXCI7XG4gIGNvbnZvbHZlQ29tcGxleCh4LCBuZXdBcnJheU9mWmVyb3MobiksIHksIG5ld0FycmF5T2ZaZXJvcyhuKSwgb3V0LCBuZXdBcnJheU9mWmVyb3MobikpO1xufVxuXG4vKipcbiAqIENvbXB1dGVzIHRoZSBjaXJjdWxhciBjb252b2x1dGlvbiBvZiB0aGUgZ2l2ZW4gY29tcGxleCB2ZWN0b3JzLiBFYWNoIHZlY3RvcidzIGxlbmd0aCBtdXN0IGJlIHRoZSBzYW1lLlxuICogQHBhcmFtIHhSZWFsIFxuICogQHBhcmFtIHhJbWFnIFxuICogQHBhcmFtIHlSZWFsIFxuICogQHBhcmFtIHlJbWFnIFxuICogQHBhcmFtIG91dFJlYWwgXG4gKiBAcGFyYW0gb3V0SW1hZyBcbiAqL1xuZnVuY3Rpb24gY29udm9sdmVDb21wbGV4KHhSZWFsOiBudW1iZXJbXSwgeEltYWc6IG51bWJlcltdLCB5UmVhbDogbnVtYmVyW10sIHlJbWFnOiBudW1iZXJbXSwgb3V0UmVhbDogbnVtYmVyW10sIG91dEltYWc6IG51bWJlcltdKTogdm9pZCB7XG4gIHZhciBuID0geFJlYWwubGVuZ3RoO1xuICBpZiAobiAhPSB4SW1hZy5sZW5ndGggfHwgbiAhPSB5UmVhbC5sZW5ndGggfHwgbiAhPSB5SW1hZy5sZW5ndGggfHxcbiAgICBuICE9IG91dFJlYWwubGVuZ3RoIHx8IG4gIT0gb3V0SW1hZy5sZW5ndGgpXG4gICAgdGhyb3cgXCJNaXNtYXRjaGVkIGxlbmd0aHNcIjtcblxuICB4UmVhbCA9IHhSZWFsLnNsaWNlKCk7XG4gIHhJbWFnID0geEltYWcuc2xpY2UoKTtcbiAgeVJlYWwgPSB5UmVhbC5zbGljZSgpO1xuICB5SW1hZyA9IHlJbWFnLnNsaWNlKCk7XG4gIHRyYW5zZm9ybSh4UmVhbCwgeEltYWcpO1xuICB0cmFuc2Zvcm0oeVJlYWwsIHlJbWFnKTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykge1xuICAgIHZhciB0ZW1wID0geFJlYWxbaV0gKiB5UmVhbFtpXSAtIHhJbWFnW2ldICogeUltYWdbaV07XG4gICAgeEltYWdbaV0gPSB4SW1hZ1tpXSAqIHlSZWFsW2ldICsgeFJlYWxbaV0gKiB5SW1hZ1tpXTtcbiAgICB4UmVhbFtpXSA9IHRlbXA7XG4gIH1cbiAgaW52ZXJzZVRyYW5zZm9ybSh4UmVhbCwgeEltYWcpO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgaSsrKSB7IC8vIFNjYWxpbmcgKGJlY2F1c2UgdGhpcyBGRlQgaW1wbGVtZW50YXRpb24gb21pdHMgaXQpXG4gICAgb3V0UmVhbFtpXSA9IHhSZWFsW2ldIC8gbjtcbiAgICBvdXRJbWFnW2ldID0geEltYWdbaV0gLyBuO1xuICB9XG59XG5cbi8qKlxuICogQ3JlYXRlIGFuIGFycmF5IG9mIHNpemUgYG5gIHdpdGggemVyb3NcbiAqIEBwYXJhbSBuIGFycmF5IHNpemVcbiAqIEByZXR1cm5zIHRoZSByZXN1bHRpbmcgYXJyYXlcbiAqL1xuZnVuY3Rpb24gbmV3QXJyYXlPZlplcm9zKG46IG51bWJlcik6IG51bWJlcltdIHtcbiAgdmFyIHJlc3VsdCA9IFtdO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKylcbiAgICByZXN1bHQucHVzaCgwKTtcbiAgcmV0dXJuIHJlc3VsdDtcbn0iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImV4cG9ydHMiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwiZmZ0Iiwic2lnbmFsIiwiZnMiLCJpbWFnUGFydCIsImlnbm9yZUZmdEFtcGxpdHVkZXNMb3dlclRoYW4iLCJkYXRhIiwidGltZSIsInJlYWxQYXJ0IiwiZnJlcXVlbmN5IiwiYW1wbGl0dWRlIiwicGhhc2UiLCJzYW1wbGluZ1RpbWUiLCJsZW5ndGgiLCJpIiwibmV3QXJyYXlPZlplcm9zIiwiYXV4UmVhbCIsIm1hcCIsIm51bSIsImF1eEltYWciLCJ0cmFuc2Zvcm0iLCJNYXRoIiwic3FydCIsInBvdyIsImF0YW4yIiwic29ydEFycmF5QXV4Iiwic2xpY2UiLCJyZXZlcnNlIiwiZm9yRWFjaCIsImVsIiwidW5zaGlmdCIsInBvcCIsImlmZnQiLCJmZnRSZWFsUGFydCIsImZmdEltYWdQYXJ0IiwiaWdub3JlSW1hZ0FtcGxpdHVkZXNMb3dlclRoYW4iLCJhYnMiLCJyZWR1Y2UiLCJhIiwiYiIsIm1heCIsInRhbiIsImludmVyc2VUcmFuc2Zvcm0iLCJyZWFsIiwiaW1hZyIsIm4iLCJsZXZlbHMiLCJjb3NUYWJsZSIsIkFycmF5Iiwic2luVGFibGUiLCJjb3MiLCJQSSIsInNpbiIsImoiLCJyZXZlcnNlQml0cyIsInRlbXAiLCJzaXplIiwiaGFsZnNpemUiLCJ0YWJsZXN0ZXAiLCJrIiwibCIsInRwcmUiLCJ0cGltIiwidHJhbnNmb3JtUmFkaXgyIiwibSIsImFyZWFsIiwiYWltYWciLCJicmVhbCIsImJpbWFnIiwiY1JlYWwiLCJjSW1hZyIsInhSZWFsIiwieEltYWciLCJ5UmVhbCIsInlJbWFnIiwib3V0UmVhbCIsIm91dEltYWciLCJjb252b2x2ZUNvbXBsZXgiLCJ0cmFuc2Zvcm1CbHVlc3RlaW4iLCJ4IiwiYml0cyIsInkiLCJyZXN1bHQiLCJwdXNoIl0sInNvdXJjZVJvb3QiOiIifQ==